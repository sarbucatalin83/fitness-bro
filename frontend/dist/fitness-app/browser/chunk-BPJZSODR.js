var Tw=Object.defineProperty,Aw=Object.defineProperties;var Rw=Object.getOwnPropertyDescriptors;var qf=Object.getOwnPropertySymbols;var Mw=Object.prototype.hasOwnProperty,Nw=Object.prototype.propertyIsEnumerable;var Gf=(e,t,n)=>t in e?Tw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||={})Mw.call(t,n)&&Gf(e,n,t[n]);if(qf)for(var n of qf(t))Nw.call(t,n)&&Gf(e,n,t[n]);return e},Y=(e,t)=>Aw(e,Rw(t));var Ee=null,ji=!1,Fc=1,xw=null,De=Symbol("SIGNAL");function I(e){let t=Ee;return Ee=e,t}function Ui(){return Ee}var oo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rr(e){if(ji)throw new Error("");if(Ee===null)return;Ee.consumerOnSignalRead(e);let t=Ee.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Ee.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Ee.producers,n!==void 0&&n.producer===e)){Ee.producersTail=n,n.lastReadVersion=e.version;return}let o=e.consumersTail;if(o!==void 0&&o.consumer===Ee&&(!r||kw(o,Ee)))return;let i=or(Ee),s={producer:e,consumer:Ee,nextProducer:n,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};Ee.producersTail=s,t!==void 0?t.nextProducer=s:Ee.producers=s,i&&Yf(e,s)}function Wf(){Fc++}function jc(e){if(!(or(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Fc)){if(!e.producerMustRecompute(e)&&!Vi(e)){Lc(e);return}e.producerRecomputeValue(e),Lc(e)}}function $c(e){if(e.consumers===void 0)return;let t=ji;ji=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Ow(r)}}finally{ji=t}}function Uc(){return Ee?.consumerAllowSignalWrites!==!1}function Ow(e){e.dirty=!0,$c(e),e.consumerMarkedDirty?.(e)}function Lc(e){e.dirty=!1,e.lastCleanEpoch=Fc}function io(e){return e&&Kf(e),I(e)}function Kf(e){e.producersTail=void 0,e.recomputing=!0}function Bi(e,t){I(t),e&&Zf(e)}function Zf(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(or(e))do n=Bc(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function Vi(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(jc(n),r!==n.version))return!0}return!1}function so(e){if(or(e)){let t=e.producers;for(;t!==void 0;)t=Bc(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Yf(e,t){let n=e.consumersTail,r=or(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let o=e.producers;o!==void 0;o=o.nextProducer)Yf(o.producer,o)}function Bc(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:t.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(t.consumers=r,!or(t)){let i=t.producers;for(;i!==void 0;)i=Bc(i)}return n}function or(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Vc(e){xw?.(e)}function kw(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Hc(e,t){return Object.is(e,t)}function Hi(e,t){let n=Object.create(Pw);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(jc(n),rr(n),n.value===$i)throw n.error;return n.value};return r[De]=n,Vc(n),r}var kc=Symbol("UNSET"),Pc=Symbol("COMPUTING"),$i=Symbol("ERRORED"),Pw=Y(w({},oo),{value:kc,dirty:!0,error:null,equal:Hc,kind:"computed",producerMustRecompute(e){return e.value===kc||e.value===Pc},producerRecomputeValue(e){if(e.value===Pc)throw new Error("");let t=e.value;e.value=Pc;let n=io(e),r,o=!1;try{r=e.computation(),I(null),o=t!==kc&&t!==$i&&r!==$i&&e.equal(t,r)}catch(i){r=$i,e.error=i}finally{Bi(e,n)}if(o){e.value=t;return}e.value=r,e.version++}});function Lw(){throw new Error}var Qf=Lw;function Jf(e){Qf(e)}function zc(e){Qf=e}var Fw=null;function qc(e,t){let n=Object.create(zi);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Xf(n);return r[De]=n,Vc(n),[r,s=>ir(n,s),s=>eh(n,s)]}function Xf(e){return rr(e),e.value}function ir(e,t){Uc()||Jf(e),e.equal(e.value,t)||(e.value=t,jw(e))}function eh(e,t){Uc()||Jf(e),ir(e,t(e.value))}var zi=Y(w({},oo),{equal:Hc,value:void 0,kind:"signal"});function jw(e){e.version++,Wf(),$c(e),Fw?.(e)}function Gc(e){let t=I(null);try{return e()}finally{I(t)}}function x(e){return typeof e=="function"}function sr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qi=sr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ao(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var pe=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(x(r))try{r()}catch(i){t=i instanceof qi?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{th(i)}catch(s){t=t??[],s instanceof qi?t=[...t,...s.errors]:t.push(s)}}if(t)throw new qi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)th(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ao(n,t)}remove(t){let{_finalizers:n}=this;n&&ao(n,t),t instanceof e&&t._removeParent(this)}};pe.EMPTY=(()=>{let e=new pe;return e.closed=!0,e})();var Wc=pe.EMPTY;function Gi(e){return e instanceof pe||e&&"closed"in e&&x(e.remove)&&x(e.add)&&x(e.unsubscribe)}function th(e){x(e)?e():e.unsubscribe()}var Ze={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ar={setTimeout(e,t,...n){let{delegate:r}=ar;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ar;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Wi(e){ar.setTimeout(()=>{let{onUnhandledError:t}=Ze;if(t)t(e);else throw e})}function un(){}var nh=Kc("C",void 0,void 0);function rh(e){return Kc("E",void 0,e)}function oh(e){return Kc("N",e,void 0)}function Kc(e,t,n){return{kind:e,value:t,error:n}}var ln=null;function cr(e){if(Ze.useDeprecatedSynchronousErrorHandling){let t=!ln;if(t&&(ln={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=ln;if(ln=null,n)throw r}}else e()}function ih(e){Ze.useDeprecatedSynchronousErrorHandling&&ln&&(ln.errorThrown=!0,ln.error=e)}var dn=class extends pe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Gi(t)&&t.add(this)):this.destination=Bw}static create(t,n,r){return new ur(t,n,r)}next(t){this.isStopped?Yc(oh(t),this):this._next(t)}error(t){this.isStopped?Yc(rh(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Yc(nh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$w=Function.prototype.bind;function Zc(e,t){return $w.call(e,t)}var Qc=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ki(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ki(r)}else Ki(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ki(n)}}},ur=class extends dn{constructor(t,n,r){super();let o;if(x(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Ze.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Zc(t.next,i),error:t.error&&Zc(t.error,i),complete:t.complete&&Zc(t.complete,i)}):o=t}this.destination=new Qc(o)}};function Ki(e){Ze.useDeprecatedSynchronousErrorHandling?ih(e):Wi(e)}function Uw(e){throw e}function Yc(e,t){let{onStoppedNotification:n}=Ze;n&&ar.setTimeout(()=>n(e,t))}var Bw={closed:!0,next:un,error:Uw,complete:un};var lr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ye(e){return e}function Jc(...e){return Xc(e)}function Xc(e){return e.length===0?Ye:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var j=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=Hw(n)?n:new ur(n,r,o);return cr(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=sh(r),new r((o,i)=>{let s=new ur({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[lr](){return this}pipe(...n){return Xc(n)(this)}toPromise(n){return n=sh(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function sh(e){var t;return(t=e??Ze.Promise)!==null&&t!==void 0?t:Promise}function Vw(e){return e&&x(e.next)&&x(e.error)&&x(e.complete)}function Hw(e){return e&&e instanceof dn||Vw(e)&&Gi(e)}function zw(e){return x(e?.lift)}function V(e){return t=>{if(zw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function H(e,t,n,r,o){return new eu(e,t,n,r,o)}var eu=class extends dn{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var ah=sr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=(()=>{class e extends j{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zi(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ah}next(n){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Wc:(this.currentObservers=null,i.push(n),new pe(()=>{this.currentObservers=null,ao(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new j;return n.source=this,n}}return e.create=(t,n)=>new Zi(t,n),e})(),Zi=class extends le{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Wc}};var ge=class extends le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Me=new j(e=>e.complete());function ch(e){return e&&x(e.schedule)}function uh(e){return e[e.length-1]}function Yi(e){return x(uh(e))?e.pop():void 0}function Vt(e){return ch(uh(e))?e.pop():void 0}function hn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Qi(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):o(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function lh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function fn(e){return this instanceof fn?(this.v=e,this):new fn(e)}function dh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(o[f]=function(g){return new Promise(function(v,m){i.push([f,g,v,m])>1||c(f,g)})},p&&(o[f]=p(o[f])))}function c(f,p){try{u(r[f](p))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof fn?Promise.resolve(f.value.v).then(l,d):h(i[0][2],f)}function l(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function fh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof lh=="function"?lh(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}var Ji=e=>e&&typeof e.length=="number"&&typeof e!="function";function Xi(e){return x(e?.then)}function es(e){return x(e[lr])}function ts(e){return Symbol.asyncIterator&&x(e?.[Symbol.asyncIterator])}function ns(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rs=qw();function os(e){return x(e?.[rs])}function is(e){return dh(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield fn(n.read());if(o)return yield fn(void 0);yield yield fn(r)}}finally{n.releaseLock()}})}function ss(e){return x(e?.getReader)}function re(e){if(e instanceof j)return e;if(e!=null){if(es(e))return Gw(e);if(Ji(e))return Ww(e);if(Xi(e))return Kw(e);if(ts(e))return hh(e);if(os(e))return Zw(e);if(ss(e))return Yw(e)}throw ns(e)}function Gw(e){return new j(t=>{let n=e[lr]();if(x(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ww(e){return new j(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Kw(e){return new j(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Wi)})}function Zw(e){return new j(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function hh(e){return new j(t=>{Qw(e,t).catch(n=>t.error(n))})}function Yw(e){return hh(is(e))}function Qw(e,t){var n,r,o,i;return Qi(this,void 0,void 0,function*(){try{for(n=fh(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function Ne(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function as(e,t=0){return V((n,r)=>{n.subscribe(H(r,o=>Ne(r,e,()=>r.next(o),t),()=>Ne(r,e,()=>r.complete(),t),o=>Ne(r,e,()=>r.error(o),t)))})}function cs(e,t=0){return V((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function ph(e,t){return re(e).pipe(cs(t),as(t))}function gh(e,t){return re(e).pipe(cs(t),as(t))}function mh(e,t){return new j(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function vh(e,t){return new j(n=>{let r;return Ne(n,t,()=>{r=e[rs](),Ne(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>x(r?.return)&&r.return()})}function us(e,t){if(!e)throw new Error("Iterable cannot be null");return new j(n=>{Ne(n,t,()=>{let r=e[Symbol.asyncIterator]();Ne(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function yh(e,t){return us(is(e),t)}function wh(e,t){if(e!=null){if(es(e))return ph(e,t);if(Ji(e))return mh(e,t);if(Xi(e))return gh(e,t);if(ts(e))return us(e,t);if(os(e))return vh(e,t);if(ss(e))return yh(e,t)}throw ns(e)}function ie(e,t){return t?wh(e,t):re(e)}function F(...e){let t=Vt(e);return ie(e,t)}function tu(e,t){let n=x(e)?e:()=>e,r=o=>o.error(n());return new j(t?o=>t.schedule(r,0,o):r)}function ls(e){return!!e&&(e instanceof j||x(e.lift)&&x(e.subscribe))}var pn=sr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(e,t){return V((n,r)=>{let o=0;n.subscribe(H(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:Jw}=Array;function Xw(e,t){return Jw(t)?e(...t):e(t)}function ds(e){return Q(t=>Xw(e,t))}var{isArray:eE}=Array,{getPrototypeOf:tE,prototype:nE,keys:rE}=Object;function fs(e){if(e.length===1){let t=e[0];if(eE(t))return{args:t,keys:null};if(oE(t)){let n=rE(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function oE(e){return e&&typeof e=="object"&&tE(e)===nE}function hs(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function nu(...e){let t=Vt(e),n=Yi(e),{args:r,keys:o}=fs(e);if(r.length===0)return ie([],t);let i=new j(iE(r,t,o?s=>hs(o,s):Ye));return n?i.pipe(ds(n)):i}function iE(e,t,n=Ye){return r=>{Eh(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)Eh(t,()=>{let u=ie(e[c],t),l=!1;u.subscribe(H(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Eh(e,t,n){e?Ne(n,e,t):t()}function Dh(e,t,n,r,o,i,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&t.complete()},f=g=>u<r?p(g):c.push(g),p=g=>{i&&t.next(g),u++;let v=!1;re(n(g,l++)).subscribe(H(t,m=>{o?.(m),i?f(m):t.next(m)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;c.length&&u<r;){let m=c.shift();s?Ne(t,s,()=>p(m)):p(m)}h()}catch(m){t.error(m)}}))};return e.subscribe(H(t,f,()=>{d=!0,h()})),()=>{a?.()}}function _e(e,t,n=1/0){return x(t)?_e((r,o)=>Q((i,s)=>t(r,i,o,s))(re(e(r,o))),n):(typeof t=="number"&&(n=t),V((r,o)=>Dh(r,o,e,n)))}function dr(e=1/0){return _e(Ye,e)}function _h(){return dr(1)}function fr(...e){return _h()(ie(e,Vt(e)))}function co(e){return new j(t=>{re(e()).subscribe(t)})}function sE(...e){let t=Yi(e),{args:n,keys:r}=fs(e),o=new j(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;re(n[l]).subscribe(H(i,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||i.next(r?hs(r,a):a),i.complete())}))}});return t?o.pipe(ds(t)):o}var aE=new j(un);function Qe(e,t){return V((n,r)=>{let o=0;n.subscribe(H(r,i=>e.call(t,i,o++)&&r.next(i)))})}function hr(e){return V((t,n)=>{let r=null,o=!1,i;r=t.subscribe(H(n,void 0,void 0,s=>{i=re(e(s,hr(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function uo(e,t){return x(t)?_e(e,t,1):_e(e,1)}function ru(e){return V((t,n)=>{let r=!1;t.subscribe(H(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function Tt(e){return e<=0?()=>Me:V((t,n)=>{let r=0;t.subscribe(H(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function bh(e=cE){return V((t,n)=>{let r=!1;t.subscribe(H(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function cE(){return new pn}function ou(e){return V((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function At(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qe((o,i)=>e(o,i,r)):Ye,Tt(1),n?ru(t):bh(()=>new pn))}function ps(e){return e<=0?()=>Me:V((t,n)=>{let r=[];t.subscribe(H(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function iu(...e){let t=Vt(e);return V((n,r)=>{(t?fr(e,n,t):fr(e,n)).subscribe(r)})}function pt(e,t){return V((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(H(r,c=>{o?.unsubscribe();let u=0,l=i++;re(e(c,l)).subscribe(o=H(r,d=>r.next(t?t(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function lo(e){return V((t,n)=>{re(e).subscribe(H(n,()=>n.complete(),un)),!n.closed&&t.subscribe(n)})}function Ce(e,t,n){let r=x(e)||t||n?{next:e,error:t,complete:n}:e;return r?V((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(H(i,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Ye}var su;function gs(){return su}function gt(e){let t=su;return su=e,t}var Ch=Symbol("NotFound");function pr(e){return e===Ch||e?.name==="\u0275NotFound"}var Es="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",b=class extends Error{code;constructor(t,n){super(En(t,n)),this.code=t}};function dE(e){return`NG0${Math.abs(e)}`}function En(e,t){return`${dE(e)}${t?": "+t:""}`}var vo=globalThis;function z(e){for(let t in e)if(e[t]===z)return t;throw Error("")}function Rh(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Mt(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Mt).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ds(e,t){return e?t?`${e} ${t}`:e:t||""}var fE=z({__forward_ref__:z});function _s(e){return e.__forward_ref__=_s,e.toString=function(){return Mt(this())},e}function me(e){return Du(e)?e():e}function Du(e){return typeof e=="function"&&e.hasOwnProperty(fE)&&e.__forward_ref__===_s}function A(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Dn(e){return{providers:e.providers||[],imports:e.imports||[]}}function yo(e){return hE(e,bs)}function _u(e){return yo(e)!==null}function hE(e,t){return e.hasOwnProperty(t)&&e[t]||null}function pE(e){let t=e?.[bs]??null;return t||null}function cu(e){return e&&e.hasOwnProperty(vs)?e[vs]:null}var bs=z({\u0275prov:z}),vs=z({\u0275inj:z}),R=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=A({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bu(e){return e&&!!e.\u0275providers}var Cu=z({\u0275cmp:z}),Iu=z({\u0275dir:z}),Su=z({\u0275pipe:z}),Tu=z({\u0275mod:z}),ho=z({\u0275fac:z}),_n=z({__NG_ELEMENT_ID__:z}),Ih=z({__NG_ENV_ID__:z});function Au(e){return Cs(e,"@NgModule"),e[Tu]||null}function zt(e){return Cs(e,"@Component"),e[Cu]||null}function Ru(e){return Cs(e,"@Directive"),e[Iu]||null}function Mh(e){return Cs(e,"@Pipe"),e[Su]||null}function Cs(e,t){if(e==null)throw new b(-919,!1)}function bn(e){return typeof e=="string"?e:e==null?"":String(e)}function Nh(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():bn(e)}var xh=z({ngErrorCode:z}),gE=z({ngErrorMessage:z}),mE=z({ngTokenPath:z});function Mu(e,t){return Oh("",-200,t)}function Is(e,t){throw new b(-201,!1)}function Oh(e,t,n){let r=new b(t,e);return r[xh]=t,r[gE]=e,n&&(r[mE]=n),r}function vE(e){return e[xh]}var uu;function kh(){return uu}function xe(e){let t=uu;return uu=e,t}function Nu(e,t,n){let r=yo(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;Is(e,"")}var yE={},gn=yE,wE="__NG_DI_FLAG__",lu=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=mn(n)||0;try{return this.injector.get(t,r&8?null:gn,r)}catch(o){if(pr(o))return o;throw o}}};function EE(e,t=0){let n=gs();if(n===void 0)throw new b(-203,!1);if(n===null)return Nu(e,void 0,t);{let r=DE(t),o=n.retrieve(e,r);if(pr(o)){if(r.optional)return null;throw o}return o}}function O(e,t=0){return(kh()||EE)(me(e),t)}function y(e,t){return O(e,mn(t))}function mn(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function DE(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function du(e){let t=[];for(let n=0;n<e.length;n++){let r=me(e[n]);if(Array.isArray(r)){if(r.length===0)throw new b(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],c=_E(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}t.push(O(o,i))}else t.push(O(r))}return t}function _E(e){return e[wE]}function vn(e,t){let n=e.hasOwnProperty(ho);return n?e[ho]:null}function Ph(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function Lh(e){return e.flat(Number.POSITIVE_INFINITY)}function Ss(e,t){e.forEach(n=>Array.isArray(n)?Ss(n,t):t(n))}function xu(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function wo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Fh(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function Ts(e,t,n){let r=vr(e,t);return r>=0?e[r|1]=n:(r=~r,Fh(e,r,t,n)),r}function As(e,t){let n=vr(e,t);if(n>=0)return e[n|1]}function vr(e,t){return bE(e,t,1)}function bE(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var qt={},Ie=[],Cn=new R(""),Ou=new R("",-1),ku=new R(""),po=class{get(t,n=gn){if(n===gn){let o=Oh("",-201);throw o.name="\u0275NotFound",o}return n}};function Gt(e){return{\u0275providers:e}}function jh(e){return Gt([{provide:Cn,multi:!0,useValue:e}])}function $h(...e){return{\u0275providers:Pu(!0,e),\u0275fromNgModule:!0}}function Pu(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return Ss(t,s=>{let a=s;ys(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Uh(o,i),n}function Uh(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];Lu(o,i=>{t(i,r)})}}function ys(e,t,n,r){if(e=me(e),!e)return!1;let o=null,i=cu(e),s=!i&&zt(e);if(!i&&!s){let c=e.ngModule;if(i=cu(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)ys(u,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let u;try{Ss(i.imports,l=>{ys(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Uh(u,t)}if(!a){let u=vn(o)||(()=>new o);t({provide:o,useFactory:u,deps:Ie},o),t({provide:ku,useValue:o,multi:!0},o),t({provide:Cn,useValue:()=>O(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let u=e;Lu(c,l=>{t(l,u)})}}else return!1;return o!==e&&e.providers!==void 0}function Lu(e,t){for(let n of e)bu(n)&&(n=n.\u0275providers),Array.isArray(n)?Lu(n,t):t(n)}var CE=z({provide:String,useValue:z});function Bh(e){return e!==null&&typeof e=="object"&&CE in e}function IE(e){return!!(e&&e.useExisting)}function SE(e){return!!(e&&e.useFactory)}function yn(e){return typeof e=="function"}function Vh(e){return!!e.useClass}var Eo=new R(""),ms={},Sh={},au;function Do(){return au===void 0&&(au=new po),au}var de=class{},wn=class extends de{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,hu(t,s=>this.processProvider(s)),this.records.set(Ou,gr(void 0,this)),o.has("environment")&&this.records.set(de,gr(void 0,this));let i=this.records.get(Eo);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(ku,Ie,{self:!0}))}retrieve(t,n){let r=mn(n)||0;try{return this.get(t,gn,r)}catch(o){if(pr(o))return o;throw o}}destroy(){fo(this),this._destroyed=!0;let t=I(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),I(t)}}onDestroy(t){return fo(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){fo(this);let n=gt(this),r=xe(void 0),o;try{return t()}finally{gt(n),xe(r)}}get(t,n=gn,r){if(fo(this),t.hasOwnProperty(Ih))return t[Ih](this);let o=mn(r),i,s=gt(this),a=xe(void 0);try{if(!(o&4)){let u=this.records.get(t);if(u===void 0){let l=NE(t)&&yo(t);l&&this.injectableDefInScope(l)?u=gr(fu(t),ms):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,o)}let c=o&2?Do():this.parent;return n=o&8&&n===gn?null:n,c.get(t,n)}catch(c){let u=vE(c);throw u===-200||u===-201?new b(u,null):c}finally{xe(a),gt(s)}}resolveInjectorInitializers(){let t=I(null),n=gt(this),r=xe(void 0),o;try{let i=this.get(Cn,Ie,{self:!0});for(let s of i)s()}finally{gt(n),xe(r),I(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Mt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=me(t);let n=yn(t)?t:me(t&&t.provide),r=AE(t);if(!yn(t)&&t.multi===!0){let o=this.records.get(n);o||(o=gr(void 0,ms,!0),o.factory=()=>du(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let o=I(null);try{if(n.value===Sh)throw Mu(Mt(t));return n.value===ms&&(n.value=Sh,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ME(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{I(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=me(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function fu(e){let t=yo(e),n=t!==null?t.factory:vn(e);if(n!==null)return n;if(e instanceof R)throw new b(204,!1);if(e instanceof Function)return TE(e);throw new b(204,!1)}function TE(e){if(e.length>0)throw new b(204,!1);let n=pE(e);return n!==null?()=>n.factory(e):()=>new e}function AE(e){if(Bh(e))return gr(void 0,e.useValue);{let t=Fu(e);return gr(t,ms)}}function Fu(e,t,n){let r;if(yn(e)){let o=me(e);return vn(o)||fu(o)}else if(Bh(e))r=()=>me(e.useValue);else if(SE(e))r=()=>e.useFactory(...du(e.deps||[]));else if(IE(e))r=(o,i)=>O(me(e.useExisting),i!==void 0&&i&8?8:void 0);else{let o=me(e&&(e.useClass||e.provide));if(RE(e))r=()=>new o(...du(e.deps));else return vn(o)||fu(o)}return r}function fo(e){if(e.destroyed)throw new b(205,!1)}function gr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function RE(e){return!!e.deps}function ME(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function NE(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function hu(e,t){for(let n of e)Array.isArray(n)?hu(n,t):n&&bu(n)?hu(n.\u0275providers,t):t(n)}function Se(e,t){let n;e instanceof wn?(fo(e),n=e):n=new lu(e);let r,o=gt(n),i=xe(void 0);try{return t()}finally{gt(o),xe(i)}}function Hh(){return kh()!==void 0||gs()!=null}var et=0,S=1,M=2,se=3,Ue=4,Be=5,yr=6,wr=7,ne=8,Nt=9,mt=10,W=11,Er=12,ju=13,In=14,ke=15,Wt=16,Sn=17,vt=18,_o=19,$u=20,Rt=21,Rs=22,bo=23,Pe=24,Ms=25,Tn=26,ve=27,zh=1,Uu=6,Kt=7,Co=8,An=9,ee=10;function yt(e){return Array.isArray(e)&&typeof e[zh]=="object"}function tt(e){return Array.isArray(e)&&e[zh]===!0}function Bu(e){return(e.flags&4)!==0}function Zt(e){return e.componentOffset>-1}function Ns(e){return(e.flags&1)===1}function wt(e){return!!e.template}function Dr(e){return(e[M]&512)!==0}function Rn(e){return(e[M]&256)===256}var Vu="svg",qh="math";function Ve(e){for(;Array.isArray(e);)e=e[et];return e}function Hu(e,t){return Ve(t[e])}function nt(e,t){return Ve(t[e.index])}function Io(e,t){return e.data[t]}function He(e,t){let n=t[e];return yt(n)?n:n[et]}function Gh(e){return(e[M]&4)===4}function xs(e){return(e[M]&128)===128}function Wh(e){return tt(e[se])}function Et(e,t){return t==null?null:e[t]}function zu(e){e[Sn]=0}function qu(e){e[M]&1024||(e[M]|=1024,xs(e)&&To(e))}function Kh(e,t){for(;e>0;)t=t[In],e--;return t}function So(e){return!!(e[M]&9216||e[Pe]?.dirty)}function Os(e){e[mt].changeDetectionScheduler?.notify(8),e[M]&64&&(e[M]|=1024),So(e)&&To(e)}function To(e){e[mt].changeDetectionScheduler?.notify(0);let t=Ht(e);for(;t!==null&&!(t[M]&8192||(t[M]|=8192,!xs(t)));)t=Ht(t)}function Gu(e,t){if(Rn(e))throw new b(911,!1);e[Rt]===null&&(e[Rt]=[]),e[Rt].push(t)}function Zh(e,t){if(e[Rt]===null)return;let n=e[Rt].indexOf(t);n!==-1&&e[Rt].splice(n,1)}function Ht(e){let t=e[se];return tt(t)?t[se]:t}function Wu(e){return e[wr]??=[]}function Ku(e){return e.cleanup??=[]}function Yh(e,t,n,r){let o=Wu(t);o.push(n),e.firstCreatePass&&Ku(e).push(r,o.length-1)}var k={lFrame:fp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pu=!1;function Qh(){return k.lFrame.elementDepthCount}function Jh(){k.lFrame.elementDepthCount++}function Zu(){k.lFrame.elementDepthCount--}function Xh(){return k.bindingsEnabled}function ep(){return k.skipHydrationRootTNode!==null}function Yu(e){return k.skipHydrationRootTNode===e}function Qu(){k.skipHydrationRootTNode=null}function P(){return k.lFrame.lView}function oe(){return k.lFrame.tView}function tp(e){return k.lFrame.contextLView=e,e[ne]}function np(e){return k.lFrame.contextLView=null,e}function ye(){let e=Ju();for(;e!==null&&e.type===64;)e=e.parent;return e}function Ju(){return k.lFrame.currentTNode}function rp(){let e=k.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function _r(e,t){let n=k.lFrame;n.currentTNode=e,n.isParent=t}function Xu(){return k.lFrame.isParent}function op(){k.lFrame.isParent=!1}function el(){return pu}function tl(e){let t=pu;return pu=e,t}function nl(){let e=k.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ip(){return k.lFrame.bindingIndex}function sp(e){return k.lFrame.bindingIndex=e}function Yt(){return k.lFrame.bindingIndex++}function ks(e){let t=k.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ap(){return k.lFrame.inI18n}function cp(e,t){let n=k.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ps(t)}function up(){return k.lFrame.currentDirectiveIndex}function Ps(e){k.lFrame.currentDirectiveIndex=e}function lp(e){let t=k.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function rl(){return k.lFrame.currentQueryIndex}function Ls(e){k.lFrame.currentQueryIndex=e}function xE(e){let t=e[S];return t.type===2?t.declTNode:t.type===1?e[Be]:null}function ol(e,t,n){if(n&4){let o=t,i=e;for(;o=o.parent,o===null&&!(n&1);)if(o=xE(i),o===null||(i=i[In],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=k.lFrame=dp();return r.currentTNode=t,r.lView=e,!0}function Fs(e){let t=dp(),n=e[S];k.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function dp(){let e=k.lFrame,t=e===null?null:e.child;return t===null?fp(e):t}function fp(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function hp(){let e=k.lFrame;return k.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var il=hp;function js(){let e=hp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function pp(e){return(k.lFrame.contextLView=Kh(e,k.lFrame.contextLView))[ne]}function Dt(){return k.lFrame.selectedIndex}function Qt(e){k.lFrame.selectedIndex=e}function Ao(){let e=k.lFrame;return Io(e.tView,e.selectedIndex)}function gp(){k.lFrame.currentNamespace=Vu}function mp(){OE()}function OE(){k.lFrame.currentNamespace=null}function vp(){return k.lFrame.currentNamespace}var yp=!0;function $s(){return yp}function Us(e){yp=e}function gu(e,t=null,n=null,r){let o=sl(e,t,n,r);return o.resolveInjectorInitializers(),o}function sl(e,t=null,n=null,r,o=new Set){let i=[n||Ie,$h(e)];return r=r||(typeof e=="object"?void 0:Mt(e)),new wn(i,t||Do(),r||null,o)}var Je=class e{static THROW_IF_NOT_FOUND=gn;static NULL=new po;static create(t,n){if(Array.isArray(t))return gu({name:""},n,t,"");{let r=t.name??"";return gu({name:r},t.parent,t.providers,r)}}static \u0275prov=A({token:e,providedIn:"any",factory:()=>O(Ou)});static __NG_ELEMENT_ID__=-1},ae=new R(""),xt=(()=>{class e{static __NG_ELEMENT_ID__=kE;static __NG_ENV_ID__=n=>n}return e})(),mu=class extends xt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Rn(this._lView)}onDestroy(t){let n=this._lView;return Gu(n,t),()=>Zh(n,t)}};function kE(){return new mu(P())}var wp=!1,Jt=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ge(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new j(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=A({token:e,providedIn:"root",factory:()=>new e})}return e})(),vu=class extends le{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Hh()&&(this.destroyRef=y(xt,{optional:!0})??void 0,this.pendingTasks=y(Jt,{optional:!0})??void 0)}emit(t){let n=I(null);try{super.next(t)}finally{I(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof pe&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},be=vu;function ws(...e){}function al(e){let t,n;function r(){e=ws;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function cl(e){return queueMicrotask(()=>e()),()=>{e=ws}}var ul="isAngularZone",go=ul+"_ID",PE=0,Oe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new be(!1);onMicrotaskEmpty=new be(!1);onStable=new be(!1);onError=new be(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=wp}=t;if(typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,jE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ul)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new b(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,LE,ws,ws);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},LE={};function ll(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function FE(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){al(()=>{e.callbackScheduled=!1,yu(e),e.isCheckStableRunning=!0,ll(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),yu(e)}function jE(e){let t=()=>{FE(e)},n=PE++;e._inner=e._inner.fork({name:"angular",properties:{[ul]:!0,[go]:n,[go+n]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if($E(c))return r.invokeTask(i,s,a,c);try{return Th(e),r.invokeTask(i,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Ah(e)}},onInvoke:(r,o,i,s,a,c,u)=>{try{return Th(e),r.invoke(i,s,a,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!UE(c)&&t(),Ah(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,yu(e),ll(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function yu(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Th(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ah(e){e._nesting--,ll(e)}var mo=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new be;onMicrotaskEmpty=new be;onStable=new be;onError=new be;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function $E(e){return Ep(e,"__ignore_ng_zone__")}function UE(e){return Ep(e,"__scheduler_tick__")}function Ep(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Xe=class{_console=console;handleError(t){this._console.error("ERROR",t)}},rt=new R("",{factory:()=>{let e=y(Oe),t=y(de),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(Xe),n.handleError(r))})}}}),Dp={provide:Cn,useValue:()=>{let e=y(Xe,{optional:!0})},multi:!0},BE=new R("",{factory:()=>{let e=y(ae).defaultView;if(!e)return;let t=y(rt),n=i=>{t(i.reason),i.preventDefault()},r=i=>{i.error?t(i.error):t(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),y(xt).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function VE(){return Gt([jh(()=>void y(BE))])}function ze(e,t){let[n,r,o]=qc(e,t?.equal),i=n,s=i[De];return i.set=r,i.update=o,i.asReadonly=Bs.bind(i),i}function Bs(){let e=this[De];if(e.readonlyFn===void 0){let t=()=>this();t[De]=e,e.readonlyFn=t}return e.readonlyFn}var mr=class{},Ro=new R("",{factory:()=>!0});var dl=new R("");var fl=(()=>{class e{static \u0275prov=A({token:e,providedIn:"root",factory:()=>new wu})}return e})(),wu=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Eu=class{[De];constructor(t){this[De]=t}destroy(){this[De].destroy()}};function ot(e){return Gc(e)}function jo(e){return{toString:e}.toString()}function YE(e){return typeof e=="function"}function Qp(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Zs=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Pn=(()=>{let e=()=>Jp;return e.ngInherit=!0,e})();function Jp(e){return e.type.prototype.ngOnChanges&&(e.setInput=JE),QE}function QE(){let e=eg(this),t=e?.current;if(t){let n=e.previous;if(n===qt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function JE(e,t,n,r,o){let i=this.declaredInputs[r],s=eg(e)||XE(e,{previous:qt,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[i];a[i]=new Zs(u&&u.currentValue,n,c===qt),Qp(e,t,o,n)}var Xp="__ngSimpleChanges__";function eg(e){return e[Xp]||null}function XE(e,t){return e[Xp]=t}var _p=[];var q=function(e,t=null,n){for(let r=0;r<_p.length;r++){let o=_p[r];o(e,t,n)}},$=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})($||{});function eD(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=Jp(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function tD(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function zs(e,t,n){tg(e,t,3,n)}function qs(e,t,n,r){(e[M]&3)===n&&tg(e,t,n,r)}function hl(e,t){let n=e[M];(n&3)===t&&(n&=16383,n+=1,e[M]=n)}function tg(e,t,n,r){let o=r!==void 0?e[Sn]&65535:0,i=r??-1,s=t.length-1,a=0;for(let c=o;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Sn]+=65536),(a<i||i==-1)&&(nD(e,n,t,c),e[Sn]=(e[Sn]&4294901760)+c+2),c++}function bp(e,t){q($.LifecycleHookStart,e,t);let n=I(null);try{t.call(e)}finally{I(n),q($.LifecycleHookEnd,e,t)}}function nD(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[M]>>14<e[Sn]>>16&&(e[M]&3)===t&&(e[M]+=16384,bp(a,i)):bp(a,i)}var Cr=-1,Nn=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,o){this.factory=t,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function rD(e){return(e.flags&8)!==0}function oD(e){return(e.flags&16)!==0}function iD(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];sD(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function ng(e){return e===3||e===4||e===6}function sD(e){return e.charCodeAt(0)===64}function Ir(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Cp(e,n,o,null,t[++r]):Cp(e,n,o,null,null))}}return e}function Cp(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){o!==null&&(e[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),o!==null&&e.splice(i++,0,o)}function rg(e){return e!==Cr}function Ys(e){return e&32767}function aD(e){return e>>16}function Qs(e,t){let n=aD(e),r=t;for(;n>0;)r=r[In],n--;return r}var bl=!0;function Ip(e){let t=bl;return bl=e,t}var cD=256,og=cD-1,ig=5,uD=0,_t={};function lD(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(_n)&&(r=n[_n]),r==null&&(r=n[_n]=uD++);let o=r&og,i=1<<o;t.data[e+(o>>ig)]|=i}function Js(e,t){let n=sg(e,t);if(n!==-1)return n;let r=t[S];r.firstCreatePass&&(e.injectorIndex=t.length,pl(r.data,e),pl(t,null),pl(r.blueprint,null));let o=Ql(e,t),i=e.injectorIndex;if(rg(o)){let s=Ys(o),a=Qs(o,t),c=a[S].data;for(let u=0;u<8;u++)t[i+u]=a[s+u]|c[s+u]}return t[i+8]=o,i}function pl(e,t){e.push(0,0,0,0,0,0,0,0,t)}function sg(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Ql(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=dg(o),r===null)return Cr;if(n++,o=o[In],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Cr}function Cl(e,t,n){lD(e,t,n)}function dD(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,o=0;for(;o<r;){let i=n[o];if(ng(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof n[o]=="string";)o++;else{if(i===t)return n[o+1];o=o+2}}}return null}function ag(e,t,n){if(n&8||e!==void 0)return e;Is(t,"NodeInjector")}function cg(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=e[Nt],i=xe(void 0);try{return o?o.get(t,r,n&8):Nu(t,r,n&8)}finally{xe(i)}}return ag(r,t,n)}function ug(e,t,n,r=0,o){if(e!==null){if(t[M]&2048&&!(r&2)){let s=gD(e,t,n,r,_t);if(s!==_t)return s}let i=lg(e,t,n,r,_t);if(i!==_t)return i}return cg(t,n,r,o)}function lg(e,t,n,r,o){let i=hD(n);if(typeof i=="function"){if(!ol(t,e,r))return r&1?ag(o,n,r):cg(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))Is(n);else return s}finally{il()}}else if(typeof i=="number"){let s=null,a=sg(e,t),c=Cr,u=r&1?t[ke][Be]:null;for((a===-1||r&4)&&(c=a===-1?Ql(e,t):t[a+8],c===Cr||!Tp(r,!1)?a=-1:(s=t[S],a=Ys(c),t=Qs(c,t)));a!==-1;){let l=t[S];if(Sp(i,a,l.data)){let d=fD(a,t,n,s,r,u);if(d!==_t)return d}c=t[a+8],c!==Cr&&Tp(r,t[S].data[a+8]===u)&&Sp(i,a,t)?(s=l,a=Ys(c),t=Qs(c,t)):a=-1}}return o}function fD(e,t,n,r,o,i){let s=t[S],a=s.data[e+8],c=r==null?Zt(a)&&bl:r!=s&&(a.type&3)!==0,u=o&1&&i===a,l=Gs(a,s,n,c,u);return l!==null?xo(t,s,l,a,o):_t}function Gs(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,c=e.directiveStart,u=e.directiveEnd,l=i>>20,d=r?a:a+l,h=o?a+l:u;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(o){let f=s[c];if(f&&wt(f)&&f.type===n)return c}return null}function xo(e,t,n,r,o){let i=e[n],s=t.data;if(i instanceof Nn){let a=i;if(a.resolving){let f=Nh(s[n]);throw Mu(f)}let c=Ip(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],l,d=a.injectImpl?xe(a.injectImpl):null,h=ol(e,r,0);try{i=e[n]=a.factory(void 0,o,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&eD(n,s[n],t)}finally{d!==null&&xe(d),Ip(c),a.resolving=!1,il()}}return i}function hD(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(_n)?e[_n]:void 0;return typeof t=="number"?t>=0?t&og:pD:t}function Sp(e,t,n){let r=1<<e;return!!(n[t+(e>>ig)]&r)}function Tp(e,t){return!(e&2)&&!(e&1&&t)}var Mn=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ug(this._tNode,this._lView,t,mn(r),n)}};function pD(){return new Mn(ye(),P())}function $o(e){return jo(()=>{let t=e.prototype.constructor,n=t[ho]||Il(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[ho]||Il(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Il(e){return Du(e)?()=>{let t=Il(me(e));return t&&t()}:vn(e)}function gD(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[M]&2048&&!Dr(s);){let a=lg(i,s,n,r|2,_t);if(a!==_t)return a;let c=i.parent;if(!c){let u=s[$u];if(u){let l=u.get(n,_t,r);if(l!==_t)return l}c=dg(s),s=s[In]}i=c}return o}function dg(e){let t=e[S],n=t.type;return n===2?t.declTNode:n===1?e[Be]:null}function Uo(e){return dD(ye(),e)}function mD(){return Nr(ye(),P())}function Nr(e,t){return new kt(nt(e,t))}var kt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=mD}return e})();function vD(e){return e instanceof kt?e.nativeElement:e}function yD(){return this._results[Symbol.iterator]()}var Xs=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new le}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Lh(t);(this._changesDetected=!Ph(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yD};function fg(e){return(e.flags&128)===128}var Jl=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Jl||{}),hg=new Map,wD=0;function ED(){return wD++}function DD(e){hg.set(e[_o],e)}function Sl(e){hg.delete(e[_o])}var Ap="__ngContext__";function Sr(e,t){yt(t)?(e[Ap]=t[_o],DD(t)):e[Ap]=t}function pg(e){return mg(e[Er])}function gg(e){return mg(e[Ue])}function mg(e){for(;e!==null&&!tt(e);)e=e[Ue];return e}var _D;function Xl(e){_D=e}var fa=new R("",{factory:()=>bD}),bD="ng";var ha=new R(""),Bo=new R("",{providedIn:"platform",factory:()=>"unknown"});var pa=new R("",{factory:()=>y(ae).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vg="r";var yg="di";var wg=!1,Eg=new R("",{factory:()=>wg});var CD=(e,t,n,r)=>{};function ID(e,t,n,r){CD(e,t,n,r)}function ed(e){return(e.flags&32)===32}var SD=()=>null;function Dg(e,t,n=!1){return SD(e,t,n)}function _g(e,t){let n=e.contentQueries;if(n!==null){let r=I(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Ls(i),a.contentQueries(2,t[s],s)}}}finally{I(r)}}}function Tl(e,t,n){Ls(0);let r=I(null);try{t(e,n)}finally{I(r)}}function bg(e,t,n){if(Bu(t)){let r=I(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{I(r)}}}var at=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(at||{});var Vs;function TD(){if(Vs===void 0&&(Vs=null,vo.trustedTypes))try{Vs=vo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Vs}function Rp(e){return TD()?.createScriptURL(e)||e}var ea=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Es})`}};function Vo(e){return e instanceof ea?e.changingThisBreaksApplicationSecurity:e}function td(e,t){let n=Cg(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Es})`)}return n===t}function Cg(e){return e instanceof ea&&e.getTypeName()||null}var AD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ig(e){return e=String(e),e.match(AD)?e:"unsafe:"+e}function RD(e,t){return e.createText(t)}function MD(e,t,n){e.setValue(t,n)}function Sg(e,t,n){return e.createElement(t,n)}function ta(e,t,n,r,o){e.insertBefore(t,n,r,o)}function Tg(e,t,n){e.appendChild(t,n)}function Mp(e,t,n,r,o){r!==null?ta(e,t,n,r,o):Tg(e,t,n)}function Ag(e,t,n,r){e.removeChild(null,t,n,r)}function ND(e,t,n){e.setAttribute(t,"style",n)}function xD(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Rg(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&iD(e,t,r),o!==null&&xD(e,t,o),i!==null&&ND(e,t,i)}var ga=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(ga||{});function Mg(e){let t=xg();return t?t.sanitize(ga.URL,e)||"":td(e,"URL")?Vo(e):Ig(bn(e))}function Ng(e){let t=xg();if(t)return Rp(t.sanitize(ga.RESOURCE_URL,e)||"");if(td(e,"ResourceURL"))return Rp(Vo(e));throw new b(904,!1)}function OD(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Ng:Mg}function nd(e,t,n){return OD(t,n)(e)}function xg(){let e=P();return e&&e[mt].sanitizer}function Og(e){return e instanceof Function?e():e}function kD(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var kg="ng-template";function PD(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&kD(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(rd(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function rd(e){return e.type===4&&e.value!==kg}function LD(e,t,n){let r=e.type===4&&!n?kg:e.value;return t===r}function FD(e,t,n){let r=4,o=e.attrs,i=o!==null?UD(o):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!it(r)&&!it(c))return!1;if(s&&it(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!LD(e,c,n)||c===""&&t.length===1){if(it(r))return!1;s=!0}}else if(r&8){if(o===null||!PD(e,o,c,n)){if(it(r))return!1;s=!0}}else{let u=t[++a],l=jD(c,o,rd(e),n);if(l===-1){if(it(r))return!1;s=!0;continue}if(u!==""){let d;if(l>i?d="":d=o[l+1].toLowerCase(),r&2&&u!==d){if(it(r))return!1;s=!0}}}}return it(r)||s}function it(e){return(e&1)===0}function jD(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return BD(t,e)}function $D(e,t,n=!1){for(let r=0;r<t.length;r++)if(FD(e,t[r],n))return!0;return!1}function UD(e){for(let t=0;t<e.length;t++){let n=e[t];if(ng(n))return t}return e.length}function BD(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Np(e,t){return e?":not("+t.trim()+")":t}function VD(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!it(s)&&(t+=Np(i,o),o=""),r=s,i=i||!it(r);n++}return o!==""&&(t+=Np(i,o)),t}function HD(e){return e.map(VD).join(",")}function zD(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!it(o))break;o=i}r++}return n.length&&t.push(1,...n),t}var Te={};function od(e,t,n,r,o,i,s,a,c,u,l){let d=ve+r,h=d+o,f=qD(d,h),p=typeof u=="function"?u():u;return f[S]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function qD(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Te);return n}function GD(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=od(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function id(e,t,n,r,o,i,s,a,c,u,l){let d=t.blueprint.slice();return d[et]=o,d[M]=r|4|128|8|64|1024,(u!==null||e&&e[M]&2048)&&(d[M]|=2048),zu(d),d[se]=d[In]=e,d[ne]=n,d[mt]=s||e&&e[mt],d[W]=a||e&&e[W],d[Nt]=c||e&&e[Nt]||null,d[Be]=i,d[_o]=ED(),d[yr]=l,d[$u]=u,d[ke]=t.type==2?e[ke]:d,d}function WD(e,t,n){let r=nt(t,e),o=GD(n),i=e[mt].rendererFactory,s=sd(e,id(e,o,null,Pg(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=s}function Pg(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Lg(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function sd(e,t){return e[Er]?e[ju][Ue]=t:e[Er]=t,e[ju]=t,t}function KD(e=1){Fg(oe(),P(),Dt()+e,!1)}function Fg(e,t,n,r){if(!r)if((t[M]&3)===3){let i=e.preOrderCheckHooks;i!==null&&zs(t,i,n)}else{let i=e.preOrderHooks;i!==null&&qs(t,i,0,n)}Qt(n)}var ma=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(ma||{});function Al(e,t,n,r){let o=I(null);try{let[i,s,a]=e.inputs[n],c=null;(s&ma.SignalBased)!==0&&(c=t[i][De]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,i):Qp(t,c,i,r)}finally{I(o)}}var Ot=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(Ot||{}),ZD;function ad(e,t){return ZD(e,t)}var xn=new Set,cd=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(cd||{}),Ho=new R(""),xp=new Set;function Ln(e){xp.has(e)||(xp.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var jg=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=A({token:e,providedIn:"root",factory:()=>new e})}return e})();var $g=new R("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:y(de)})});function Ug(e,t,n){let r=e.get($g);if(Array.isArray(t))for(let o of t)r.queue.add(o),n?.detachedLeaveAnimationFns?.push(o);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function YD(e,t){let n=e.get($g);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function QD(e,t){for(let[n,r]of t)Ug(e,r.animateFns)}function Op(e,t,n,r){let o=e?.[Tn]?.enter;t!==null&&o&&o.has(n.index)&&QD(r,o)}function br(e,t,n,r,o,i,s,a){if(o!=null){let c,u=!1;tt(o)?c=o:yt(o)&&(u=!0,o=o[et]);let l=Ve(o);e===0&&r!==null?(Op(a,r,i,n),s==null?Tg(t,r,l):ta(t,r,l,s||null,!0)):e===1&&r!==null?(Op(a,r,i,n),ta(t,r,l,s||null,!0)):e===2?kp(a,i,n,d=>{Ag(t,l,u,d)}):e===3&&kp(a,i,n,()=>{t.destroyNode(l)}),c!=null&&l_(t,e,n,c,i,r,s)}}function JD(e,t){Bg(e,t),t[et]=null,t[Be]=null}function XD(e,t,n,r,o,i){r[et]=o,r[Be]=t,ya(e,r,n,1,o,i)}function Bg(e,t){t[mt].changeDetectionScheduler?.notify(9),ya(e,t,t[W],2,null,null)}function e_(e){let t=e[Er];if(!t)return gl(e[S],e);for(;t;){let n=null;if(yt(t))n=t[Er];else{let r=t[ee];r&&(n=r)}if(!n){for(;t&&!t[Ue]&&t!==e;)yt(t)&&gl(t[S],t),t=t[se];t===null&&(t=e),yt(t)&&gl(t[S],t),n=t&&t[Ue]}t=n}}function ud(e,t){let n=e[An],r=n.indexOf(t);n.splice(r,1)}function va(e,t){if(Rn(t))return;let n=t[W];n.destroyNode&&ya(e,t,n,3,null,null),e_(t)}function gl(e,t){if(Rn(t))return;let n=I(null);try{t[M]&=-129,t[M]|=256,t[Pe]&&so(t[Pe]),r_(e,t),n_(e,t),t[S].type===1&&t[W].destroy();let r=t[Wt];if(r!==null&&tt(t[se])){r!==t[se]&&ud(r,t);let o=t[vt];o!==null&&o.detachView(e)}Sl(t)}finally{I(n)}}function kp(e,t,n,r){let o=e?.[Tn];if(o==null||o.leave==null||!o.leave.has(t.index))return r(!1);e&&xn.add(e),Ug(n,()=>{if(o.leave&&o.leave.has(t.index)){let s=o.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:l}=u();a.push(l)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),t_(e,r)}else e&&xn.delete(e),r(!1)},o)}function t_(e,t){let n=e[Tn]?.running;if(n){n.then(()=>{e[Tn].running=void 0,xn.delete(e),t(!0)});return}t(!1)}function n_(e,t){let n=e.cleanup,r=t[wr];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[wr]=null);let o=t[Rt];if(o!==null){t[Rt]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[bo];if(i!==null){t[bo]=null;for(let s of i)s.destroy()}}function r_(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Nn)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];q($.LifecycleHookStart,a,c);try{c.call(a)}finally{q($.LifecycleHookEnd,a,c)}}else{q($.LifecycleHookStart,o,i);try{i.call(o)}finally{q($.LifecycleHookEnd,o,i)}}}}}function o_(e,t,n){return i_(e,t.parent,n)}function i_(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[et];if(Zt(r)){let{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===at.None||o===at.Emulated)return null}return nt(r,n)}function s_(e,t,n){return c_(e,t,n)}function a_(e,t,n){return e.type&40?nt(e,n):null}var c_=a_,Pp;function ld(e,t,n,r){let o=o_(e,r,t),i=t[W],s=r.parent||t[Be],a=s_(s,r,t);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Mp(i,o,n[c],a,!1);else Mp(i,o,n,a,!1);Pp!==void 0&&Pp(i,r,t,n,o)}function Mo(e,t){if(t!==null){let n=t.type;if(n&3)return nt(t,e);if(n&4)return Rl(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Mo(e,r);{let o=e[t.index];return tt(o)?Rl(-1,o):Ve(o)}}else{if(n&128)return Mo(e,t.next);if(n&32)return ad(t,e)()||Ve(e[t.index]);{let r=Vg(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=Ht(e[ke]);return Mo(o,r)}else return Mo(e,t.next)}}}return null}function Vg(e,t){if(t!==null){let r=e[ke][Be],o=t.projection;return r.projection[o]}return null}function Rl(e,t){let n=ee+e+1;if(n<t.length){let r=t[n],o=r[S].firstChild;if(o!==null)return Mo(r,o)}return t[Kt]}function dd(e,t,n,r,o,i,s){for(;n!=null;){let a=r[Nt];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&t===0&&(c&&Sr(Ve(c),r),n.flags|=2),!ed(n))if(u&8)dd(e,t,n.child,r,o,i,!1),br(t,e,a,o,c,n,i,r);else if(u&32){let l=ad(n,r),d;for(;d=l();)br(t,e,a,o,d,n,i,r);br(t,e,a,o,c,n,i,r)}else u&16?u_(e,t,r,n,o,i):br(t,e,a,o,c,n,i,r);n=s?n.projectionNext:n.next}}function ya(e,t,n,r,o,i){dd(n,r,e.firstChild,t,o,i,!1)}function u_(e,t,n,r,o,i){let s=n[ke],c=s[Be].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];br(t,e,n[Nt],o,l,r,i,n)}else{let u=c,l=s[se];fg(r)&&(u.flags|=128),dd(e,t,u,l,o,i,!0)}}function l_(e,t,n,r,o,i,s){let a=r[Kt],c=Ve(r);a!==c&&br(t,e,n,i,a,o,s);for(let u=ee;u<r.length;u++){let l=r[u];ya(l[S],l,e,t,i,a)}}function d_(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:Ot.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Ot.Important),e.setStyle(n,r,o,i))}}function Hg(e,t,n,r,o){let i=Dt(),s=r&2;try{Qt(-1),s&&t.length>ve&&Fg(e,t,ve,!1);let a=s?$.TemplateUpdateStart:$.TemplateCreateStart;q(a,o,n),n(r,o)}finally{Qt(i);let a=s?$.TemplateUpdateEnd:$.TemplateCreateEnd;q(a,o,n)}}function zg(e,t,n){v_(e,t,n),(n.flags&64)===64&&y_(e,t,n)}function fd(e,t,n=nt){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function f_(e,t,n,r){let i=r.get(Eg,wg)||n===at.ShadowDom||n===at.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,i);return h_(s),s}function h_(e){p_(e)}var p_=()=>null;function g_(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function qg(e,t,n,r,o,i){let s=t[S];if(hd(e,s,t,n,r)){Zt(e)&&m_(t,e.index);return}e.type&3&&(n=g_(n)),Gg(e,t,n,r,o,i)}function Gg(e,t,n,r,o,i){if(e.type&3){let s=nt(e,t);r=i!=null?i(r,e.value||"",n):r,o.setProperty(s,n,r)}else e.type&12}function m_(e,t){let n=He(t,e);n[M]&16||(n[M]|=64)}function v_(e,t,n){let r=n.directiveStart,o=n.directiveEnd;Zt(n)&&WD(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Js(n,t);let i=n.initialInputs;for(let s=r;s<o;s++){let a=e.data[s],c=xo(t,e,s,n);if(Sr(c,t),i!==null&&b_(t,s-r,c,a,n,i),wt(a)){let u=He(n.index,t);u[ne]=xo(t,e,s,n)}}}function y_(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=up();try{Qt(i);for(let a=r;a<o;a++){let c=e.data[a],u=t[a];Ps(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&w_(c,u)}}finally{Qt(-1),Ps(s)}}function w_(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function E_(e,t){let n=e.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];$D(t,i.selectors,!1)&&(r??=[],wt(i)?r.unshift(i):r.push(i))}return r}function D_(e,t,n,r,o,i){let s=nt(e,t);__(t[W],s,i,e.value,n,r,o)}function __(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?bn(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function b_(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Al(r,n,c,u)}}function Wg(e,t,n,r,o){let i=ve+n,s=t[S],a=o(s,t,e,r,n);t[i]=a,_r(e,!0);let c=e.type===2;return c?(Rg(t[W],a,e),(Qh()===0||Ns(e))&&Sr(a,t),Jh()):Sr(a,t),$s()&&(!c||!ed(e))&&ld(s,t,a,e),e}function Kg(e){let t=e;return Xu()?op():(t=t.parent,_r(t,!1)),t}function C_(e,t){let n=e[Nt];if(!n)return;let r;try{r=n.get(rt,null)}catch{r=null}r?.(t)}function hd(e,t,n,r,o){let i=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],d=t.data[u];Al(d,n[u],l,o),a=!0}if(i)for(let c of i){let u=n[c],l=t.data[c];Al(l,u,r,o),a=!0}return a}function I_(e,t){let n=He(t,e),r=n[S];S_(r,n);let o=n[et];o!==null&&n[yr]===null&&(n[yr]=Dg(o,n[Nt])),q($.ComponentStart);try{pd(r,n,n[ne])}finally{q($.ComponentEnd,n[ne])}}function S_(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function pd(e,t,n){Fs(t);try{let r=e.viewQuery;r!==null&&Tl(1,r,n);let o=e.template;o!==null&&Hg(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[vt]?.finishViewCreation(e),e.staticContentQueries&&_g(e,t),e.staticViewQueries&&Tl(2,e.viewQuery,n);let i=e.components;i!==null&&T_(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[M]&=-5,js()}}function T_(e,t){for(let n=0;n<t.length;n++)I_(e,t[n])}function wa(e,t,n,r){let o=I(null);try{let i=t.tView,a=e[M]&4096?4096:16,c=id(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[Wt]=u;let l=e[vt];return l!==null&&(c[vt]=l.createEmbeddedView(i)),pd(i,c,n),c}finally{I(o)}}function Oo(e,t){return!t||t.firstChild===null||fg(e)}function ko(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(Ve(i)),tt(i)&&Zg(i,r);let s=n.type;if(s&8)ko(e,t,n.child,r);else if(s&32){let a=ad(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Vg(t,n);if(Array.isArray(a))r.push(...a);else{let c=Ht(t[ke]);ko(c[S],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function Zg(e,t){for(let n=ee;n<e.length;n++){let r=e[n],o=r[S].firstChild;o!==null&&ko(r[S],r,o,t)}e[Kt]!==e[et]&&t.push(e[Kt])}function Yg(e){if(e[Ms]!==null){for(let t of e[Ms])t.impl.addSequence(t);e[Ms].length=0}}var Qg=[];function A_(e){return e[Pe]??R_(e)}function R_(e){let t=Qg.pop()??Object.create(N_);return t.lView=e,t}function M_(e){e.lView[Pe]!==e&&(e.lView=null,Qg.push(e))}var N_=Y(w({},oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{To(e.lView)},consumerOnSignalRead(){this.lView[Pe]=this}});function x_(e){let t=e[Pe]??Object.create(O_);return t.lView=e,t}var O_=Y(w({},oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Ht(e.lView);for(;t&&!Jg(t[S]);)t=Ht(t);t&&qu(t)},consumerOnSignalRead(){this.lView[Pe]=this}});function Jg(e){return e.type!==2}function Xg(e){if(e[bo]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[bo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[M]&8192)}}var k_=100;function em(e,t=0){let r=e[mt].rendererFactory,o=!1;o||r.begin?.();try{P_(e,t)}finally{o||r.end?.()}}function P_(e,t){let n=el();try{tl(!0),Ml(e,t);let r=0;for(;So(e);){if(r===k_)throw new b(103,!1);r++,Ml(e,1)}}finally{tl(n)}}function L_(e,t,n,r){if(Rn(t))return;let o=t[M],i=!1,s=!1;Fs(t);let a=!0,c=null,u=null;i||(Jg(e)?(u=A_(t),c=io(u)):Ui()===null?(a=!1,u=x_(t),c=io(u)):t[Pe]&&(so(t[Pe]),t[Pe]=null));try{zu(t),sp(e.bindingStartIndex),n!==null&&Hg(e,t,n,2,r);let l=(o&3)===3;if(!i)if(l){let f=e.preOrderCheckHooks;f!==null&&zs(t,f,null)}else{let f=e.preOrderHooks;f!==null&&qs(t,f,0,null),hl(t,0)}if(s||F_(t),Xg(t),tm(t,0),e.contentQueries!==null&&_g(e,t),!i)if(l){let f=e.contentCheckHooks;f!==null&&zs(t,f)}else{let f=e.contentHooks;f!==null&&qs(t,f,1),hl(t,1)}$_(e,t);let d=e.components;d!==null&&rm(t,d,0);let h=e.viewQuery;if(h!==null&&Tl(2,h,r),!i)if(l){let f=e.viewCheckHooks;f!==null&&zs(t,f)}else{let f=e.viewHooks;f!==null&&qs(t,f,2),hl(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Rs]){for(let f of t[Rs])f();t[Rs]=null}i||(Yg(t),t[M]&=-73)}catch(l){throw i||To(t),l}finally{u!==null&&(Bi(u,c),a&&M_(u)),js()}}function tm(e,t){for(let n=pg(e);n!==null;n=gg(n))for(let r=ee;r<n.length;r++){let o=n[r];nm(o,t)}}function F_(e){for(let t=pg(e);t!==null;t=gg(t)){if(!(t[M]&2))continue;let n=t[An];for(let r=0;r<n.length;r++){let o=n[r];qu(o)}}}function j_(e,t,n){q($.ComponentStart);let r=He(t,e);try{nm(r,n)}finally{q($.ComponentEnd,r[ne])}}function nm(e,t){xs(e)&&Ml(e,t)}function Ml(e,t){let r=e[S],o=e[M],i=e[Pe],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&Vi(i)),s||=!1,i&&(i.dirty=!1),e[M]&=-9217,s)L_(r,e,r.template,e[ne]);else if(o&8192){let a=I(null);try{Xg(e),tm(e,1);let c=r.components;c!==null&&rm(e,c,1),Yg(e)}finally{I(a)}}}function rm(e,t,n){for(let r=0;r<t.length;r++)j_(e,t[r],n)}function $_(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Qt(~o);else{let i=o,s=n[++r],a=n[++r];cp(s,i);let c=t[i];q($.HostBindingsUpdateStart,c);try{a(2,c)}finally{q($.HostBindingsUpdateEnd,c)}}}}finally{Qt(-1)}}function gd(e,t){let n=el()?64:1088;for(e[mt].changeDetectionScheduler?.notify(t);e;){e[M]|=n;let r=Ht(e);if(Dr(e)&&!r)return e;e=r}return null}function om(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function im(e,t){let n=ee+t;if(n<e.length)return e[n]}function Ea(e,t,n,r=!0){let o=t[S];if(U_(o,t,e,n),r){let s=Rl(n,e),a=t[W],c=a.parentNode(e[Kt]);c!==null&&XD(o,e[Be],a,t,c,s)}let i=t[yr];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function sm(e,t){let n=Po(e,t);return n!==void 0&&va(n[S],n),n}function Po(e,t){if(e.length<=ee)return;let n=ee+t,r=e[n];if(r){let o=r[Wt];o!==null&&o!==e&&ud(o,r),t>0&&(e[n-1][Ue]=r[Ue]);let i=wo(e,ee+t);JD(r[S],r);let s=i[vt];s!==null&&s.detachView(i[S]),r[se]=null,r[Ue]=null,r[M]&=-129}return r}function U_(e,t,n,r){let o=ee+r,i=n.length;r>0&&(n[o-1][Ue]=t),r<i-ee?(t[Ue]=n[o],xu(n,ee+r,t)):(n.push(t),t[Ue]=null),t[se]=n;let s=t[Wt];s!==null&&n!==s&&am(s,t);let a=t[vt];a!==null&&a.insertView(e),Os(t),t[M]|=128}function am(e,t){let n=e[An],r=t[se];if(yt(r))e[M]|=2;else{let o=r[se][ke];t[ke]!==o&&(e[M]|=2)}n===null?e[An]=[t]:n.push(t)}var Xt=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[S];return ko(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[ne]}set context(t){this._lView[ne]=t}get destroyed(){return Rn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[se];if(tt(t)){let n=t[Co],r=n?n.indexOf(this):-1;r>-1&&(Po(t,r),wo(n,r))}this._attachedToViewContainer=!1}va(this._lView[S],this._lView)}onDestroy(t){Gu(this._lView,t)}markForCheck(){gd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[M]&=-129}reattach(){Os(this._lView),this._lView[M]|=128}detectChanges(){this._lView[M]|=1024,em(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Dr(this._lView),n=this._lView[Wt];n!==null&&!t&&ud(n,this._lView),Bg(this._lView[S],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=t;let n=Dr(this._lView),r=this._lView[Wt];r!==null&&!n&&am(r,this._lView),Os(this._lView)}};var Tr=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=B_;constructor(n,r,o){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){let i=wa(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new Xt(i)}}return e})();function B_(){return md(ye(),P())}function md(e,t){return e.type&4?new Tr(t,e,Nr(e,t)):null}function Da(e,t,n,r,o){let i=e.data[t];if(i===null)i=V_(e,t,n,r,o),ap()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=rp();i.injectorIndex=s===null?-1:s.injectorIndex}return _r(i,!0),i}function V_(e,t,n,r,o){let i=Ju(),s=Xu(),a=s?i:i&&i.parent,c=e.data[t]=z_(e,a,n,t,r,o);return H_(e,c,i,s),c}function H_(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function z_(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return ep()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function q_(e){let t=e[Uu]??[],r=e[se][W],o=[];for(let i of t)i.data[yg]!==void 0?o.push(i):G_(i,r);e[Uu]=o}function G_(e,t){let n=0,r=e.firstChild;if(r){let o=e.data[vg];for(;n<o;){let i=r.nextSibling;Ag(t,r,!1),r=i,n++}}}var W_=()=>null,K_=()=>null;function Nl(e,t){return W_(e,t)}function cm(e,t,n){return K_(e,t,n)}var um=class{},_a=class{},xl=class{resolveComponentFactory(t){throw new b(917,!1)}},zo=class{static NULL=new xl},On=class{},qo=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>Z_()}return e})();function Z_(){let e=P(),t=ye(),n=He(t.index,e);return(yt(n)?n:e)[W]}var lm=(()=>{class e{static \u0275prov=A({token:e,providedIn:"root",factory:()=>null})}return e})();var Ws={},Ol=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let o=this.injector.get(t,Ws,r);return o!==Ws||n===Ws?o:this.parentInjector.get(t,n,r)}};function na(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=Ds(o,a);else if(i==2){let c=a,u=t[++s];r=Ds(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function Ae(e,t=0){let n=P();if(n===null)return O(e,t);let r=ye();return ug(r,n,me(e),t)}function Y_(e,t,n,r,o){let i=r===null?null:{"":-1},s=o(e,n);if(s!==null){let a=s,c=null,u=null;for(let l of s)if(l.resolveHostDirectives!==null){[a,c,u]=l.resolveHostDirectives(s);break}X_(e,t,n,a,i,c,u)}i!==null&&r!==null&&Q_(n,r,i)}function Q_(e,t,n){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new b(-301,!1);r.push(t[o],i)}}function J_(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function X_(e,t,n,r,o,i,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&wt(f)&&(c=f,J_(e,n,h)),Cl(Js(n,t),e,f.type)}ib(n,e.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let u=!1,l=!1,d=Lg(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=Ir(n.mergedAttrs,f.hostAttrs),tb(e,n,t,d,f),ob(d,f,o),s!==null&&s.has(f)){let[g,v]=s.get(f);n.directiveToIndex.set(f.type,[d,g+n.directiveStart,v+n.directiveStart])}else(i===null||!i.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!u&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),u=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}eb(e,n,i)}function eb(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let o=e.data[r];if(n===null||!n.has(o))Lp(0,t,o,r),Lp(1,t,o,r),jp(t,r,!1);else{let i=n.get(o);Fp(0,t,i,r),Fp(1,t,i,r),jp(t,r,!0)}}}function Lp(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[i]??=[],s[i].push(r),dm(t,i)}}function Fp(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),dm(t,s)}}function dm(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function jp(e,t,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=e;if(r===null||!n&&o===null||n&&i===null||rd(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&o.hasOwnProperty(c)){let u=o[c];for(let l of u)if(l===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&i.hasOwnProperty(c)){let u=i[c];for(let l=0;l<u.length;l+=2)if(u[l]===t){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function tb(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=vn(o.type,!0)),s=new Nn(i,wt(o),Ae,null);e.blueprint[r]=s,n[r]=s,nb(e,t,r,Lg(e,n,o.hostVars,Te),o)}function nb(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;rb(s)!=a&&s.push(a),s.push(n,r,i)}}function rb(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function ob(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;wt(t)&&(n[""]=e)}}function ib(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function fm(e,t,n,r,o,i,s,a){let c=t[S],u=c.consts,l=Et(u,s),d=Da(c,e,n,r,l);return i&&Y_(c,t,d,Et(u,a),o),d.mergedAttrs=Ir(d.mergedAttrs,d.attrs),d.attrs!==null&&na(d,d.attrs,!1),d.mergedAttrs!==null&&na(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function hm(e,t){tD(e,t),Bu(t)&&e.queries.elementEnd(t)}function sb(e,t,n,r,o,i){let s=t.consts,a=Et(s,o),c=Da(t,e,n,r,a);if(c.mergedAttrs=Ir(c.mergedAttrs,c.attrs),i!=null){let u=Et(s,i);c.localNames=[];for(let l=0;l<u.length;l+=2)c.localNames.push(u[l],-1)}return c.attrs!==null&&na(c,c.attrs,!1),c.mergedAttrs!==null&&na(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function pm(e,t,n){return e[t]=n}function ab(e,t){return e[t]}function qe(e,t,n){if(n===Te)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function cb(e,t,n,r){let o=qe(e,t,n);return qe(e,t+1,r)||o}function Ks(e,t,n){return function r(o){let i=Zt(e)?He(e.index,t):t;gd(i,5);let s=t[ne],a=$p(t,s,n,o),c=r.__ngNextListenerFn__;for(;c;)a=$p(t,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function $p(e,t,n,r){let o=I(null);try{return q($.OutputStart,t,n),n(r)!==!1}catch(i){return C_(e,i),!1}finally{q($.OutputEnd,t,n),I(o)}}function gm(e,t,n,r,o,i,s,a){let c=Ns(e),u=!1,l=null;if(!r&&c&&(l=lb(t,n,i,e.index)),l!==null){let d=l.__ngLastListenerFn__||l;d.__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,u=!0}else{let d=nt(e,n),h=r?r(d):d;ID(n,h,i,a);let f=o.listen(h,i,a);if(!ub(i)){let p=r?g=>r(Ve(g[e.index])):e.index;mm(p,t,n,i,a,f,!1)}}return u}function ub(e){return e.startsWith("animation")||e.startsWith("transition")}function lb(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[wr],c=o[i+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function mm(e,t,n,r,o,i,s){let a=t.firstCreatePass?Ku(t):null,c=Wu(n),u=c.length;c.push(o,i),a&&a.push(r,e,u,(u+1)*(s?-1:1))}function Up(e,t,n,r,o,i){let s=t[n],a=t[S],u=a.data[n].outputs[r],d=s[u].subscribe(i);mm(e.index,a,t,o,i,d,!0)}var kl=Symbol("BINDING");var ra=class extends zo{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=zt(t);return new Ar(n,this.ngModule)}};function db(e){return Object.keys(e).map(t=>{let[n,r,o]=e[t],i={propName:n,templateName:t,isSignal:(r&ma.SignalBased)!==0};return o&&(i.transform=o),i})}function fb(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function hb(e,t,n){let r=t instanceof de?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Ol(n,r):n}function pb(e){let t=e.get(On,null);if(t===null)throw new b(407,!1);let n=e.get(lm,null),r=e.get(mr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function gb(e,t){let n=vm(e);return Sg(t,n,n==="svg"?Vu:n==="math"?qh:null)}function vm(e){return(e.selectors[0][0]||"div").toLowerCase()}var Ar=class extends _a{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=db(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=fb(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=HD(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,o,i,s){q($.DynamicComponentStart);let a=I(null);try{let c=this.componentDef,u=mb(r,c,s,i),l=hb(c,o||this.ngModule,t),d=pb(l),h=d.rendererFactory.createRenderer(null,c),f=r?f_(h,r,c.encapsulation,l):gb(c,h),p=s?.some(Bp)||i?.some(m=>typeof m!="function"&&m.bindings.some(Bp)),g=id(null,u,null,512|Pg(c),null,null,d,h,l,null,Dg(f,l,!0));g[ve]=f,Fs(g);let v=null;try{let m=fm(ve,g,2,"#host",()=>u.directiveRegistry,!0,0);Rg(h,f,m),Sr(f,g),zg(u,g,m),bg(u,m,g),hm(u,m),n!==void 0&&yb(m,this.ngContentSelectors,n),v=He(m.index,g),g[ne]=v[ne],pd(u,g,null)}catch(m){throw v!==null&&Sl(v),Sl(g),m}finally{q($.DynamicComponentEnd),js()}return new oa(this.componentType,g,!!p)}finally{I(a)}}};function mb(e,t,n,r){let o=e?["ng-version","21.0.6"]:zD(t.selectors[0]),i=null,s=null,a=0;if(n)for(let l of n)a+=l[kl].requiredVars,l.create&&(l.targetIdx=0,(i??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let d=r[l];if(typeof d!="function")for(let h of d.bindings){a+=h[kl].requiredVars;let f=l+1;h.create&&(h.targetIdx=f,(i??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let l of r){let d=typeof l=="function"?l:l.type,h=Ru(d);c.push(h)}return od(0,null,vb(i,s),1,a,c,null,null,null,[o],null)}function vb(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function Bp(e){let t=e[kl].kind;return t==="input"||t==="twoWay"}var oa=class extends um{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Io(n[S],ve),this.location=Nr(this._tNode,n),this.instance=He(this._tNode.index,n)[ne],this.hostView=this.changeDetectorRef=new Xt(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView,i=hd(r,o[S],o,t,n);this.previousInputValues.set(t,n);let s=He(r.index,o);gd(s,1)}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function yb(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Fn=(()=>{class e{static __NG_ELEMENT_ID__=wb}return e})();function wb(){let e=ye();return wm(e,P())}var Eb=Fn,ym=class extends Eb{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Nr(this._hostTNode,this._hostLView)}get injector(){return new Mn(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ql(this._hostTNode,this._hostLView);if(rg(t)){let n=Qs(t,this._hostLView),r=Ys(t),o=n[S].data[r+8];return new Mn(o,n)}else return new Mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Vp(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ee}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Nl(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,Oo(this._hostTNode,s)),a}createComponent(t,n,r,o,i,s,a){let c=t&&!YE(t),u;if(c)u=n;else{let v=n||{};u=v.index,r=v.injector,o=v.projectableNodes,i=v.environmentInjector||v.ngModuleRef,s=v.directives,a=v.bindings}let l=c?t:new Ar(zt(t)),d=r||this.parentInjector;if(!i&&l.ngModule==null){let m=(c?d:this.parentInjector).get(de,null);m&&(i=m)}let h=zt(l.componentType??{}),f=Nl(this._lContainer,h?.id??null),p=f?.firstChild??null,g=l.create(d,o,p,i,s,a);return this.insertImpl(g.hostView,u,Oo(this._hostTNode,f)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(Wh(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=o[se],u=new ym(c,c[Be],c[se]);u.detach(u.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return Ea(s,o,i,r),t.attachToViewContainerRef(),xu(ml(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Vp(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Po(this._lContainer,n);r&&(wo(ml(this._lContainer),n),va(r[S],r))}detach(t){let n=this._adjustIndex(t,-1),r=Po(this._lContainer,n);return r&&wo(ml(this._lContainer),n)!=null?new Xt(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Vp(e){return e[Co]}function ml(e){return e[Co]||(e[Co]=[])}function wm(e,t){let n,r=t[e.index];return tt(r)?n=r:(n=om(r,t,null,e),t[e.index]=n,sd(t,n)),_b(n,t,e,r),new ym(n,e,t)}function Db(e,t){let n=e[W],r=n.createComment(""),o=nt(t,e),i=n.parentNode(o);return ta(n,i,r,n.nextSibling(o),!1),r}var _b=Ib,bb=()=>!1;function Cb(e,t,n){return bb(e,t,n)}function Ib(e,t,n,r){if(e[Kt])return;let o;n.type&8?o=Ve(r):o=Db(t,n),e[Kt]=o}var Pl=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Ll=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)vd(t,n).matches!==null&&this.queries[n].setDirty()}},Fl=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=Ob(t):this.predicate=t}},jl=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},$l=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,Sb(n,i)),this.matchTNodeWithReadOption(t,n,Gs(n,t,i,!1,!1))}else r===Tr?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Gs(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===kt||o===Fn||o===Tr&&n.type&4)this.addMatch(n.index,-2);else{let i=Gs(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Sb(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Tb(e,t){return e.type&11?Nr(e,t):e.type&4?md(e,t):null}function Ab(e,t,n,r){return n===-1?Tb(t,e):n===-2?Rb(e,t,r):xo(e,e[S],n,t)}function Rb(e,t,n){if(n===kt)return Nr(t,e);if(n===Tr)return md(t,e);if(n===Fn)return wm(t,e)}function Em(e,t,n,r){let o=t[vt].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=i[u];a.push(Ab(t,l,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function Ul(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=Em(e,t,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let u=i[a+1],l=t[-c];for(let d=ee;d<l.length;d++){let h=l[d];h[Wt]===h[se]&&Ul(h[S],h,u,r)}if(l[An]!==null){let d=l[An];for(let h=0;h<d.length;h++){let f=d[h];Ul(f[S],f,u,r)}}}}}return r}function Mb(e,t){return e[vt].queries[t].queryList}function Nb(e,t,n){let r=new Xs((n&4)===4);return Yh(e,t,r,r.destroy),(t[vt]??=new Ll).queries.push(new Pl(r))-1}function xb(e,t,n,r){let o=oe();if(o.firstCreatePass){let i=ye();kb(o,new Fl(t,n,r),i.index),Pb(o,e),(n&2)===2&&(o.staticContentQueries=!0)}return Nb(o,P(),n)}function Ob(e){return e.split(",").map(t=>t.trim())}function kb(e,t,n){e.queries===null&&(e.queries=new jl),e.queries.track(new $l(t,n))}function Pb(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function vd(e,t){return e.queries.getByIndex(t)}function Lb(e,t){let n=e[S],r=vd(n,t);return r.crossesNgTemplate?Ul(n,e,t,[]):Em(n,e,r,t)}var Rr=class{},ba=class{};var ia=class extends Rr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ra(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let i=Au(t);this._bootstrapComponents=Og(i.bootstrap),this._r3Injector=sl(t,n,[{provide:Rr,useValue:this},{provide:zo,useValue:this.componentFactoryResolver},...r],Mt(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},sa=class extends ba{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new ia(this.moduleType,t,[])}};var Lo=class extends Rr{injector;componentFactoryResolver=new ra(this);instance=null;constructor(t){super();let n=new wn([...t.providers,{provide:Rr,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],t.parent||Do(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Go(e,t,n=null){return new Lo({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Fb=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Pu(!1,n.type),o=r.length>0?Go([r],this._injector,""):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=A({token:e,providedIn:"environment",factory:()=>new e(O(de))})}return e})();function yd(e){return jo(()=>{let t=Dm(e),n=Y(w({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Jl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(Fb).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||at.Emulated,styles:e.styles||Ie,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Ln("NgStandalone"),_m(n);let r=e.dependencies;return n.directiveDefs=Hp(r,jb),n.pipeDefs=Hp(r,Mh),n.id=Bb(n),n})}function jb(e){return zt(e)||Ru(e)}function xr(e){return jo(()=>({type:e.type,bootstrap:e.bootstrap||Ie,declarations:e.declarations||Ie,imports:e.imports||Ie,exports:e.exports||Ie,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function $b(e,t){if(e==null)return qt;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=ma.None,c=null),n[i]=[r,a,c],t[i]=s}return n}function Ub(e){if(e==null)return qt;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function jn(e){return jo(()=>{let t=Dm(e);return _m(t),t})}function Dm(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||qt,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ie,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$b(e.inputs,t),outputs:Ub(e.outputs),debugInfo:null}}function _m(e){e.features?.forEach(t=>t(e))}function Hp(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let o of n){let i=t(o);i!==null&&r.push(i)}return r}:null}function Bb(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Vb(e){return Object.getPrototypeOf(e.prototype).constructor}function bm(e){let t=Vb(e.type),n=!0,r=[e];for(;t;){let o;if(wt(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new b(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=vl(e.inputs),s.declaredInputs=vl(e.declaredInputs),s.outputs=vl(e.outputs);let a=o.hostBindings;a&&Wb(e,a);let c=o.viewQuery,u=o.contentQueries;if(c&&qb(e,c),u&&Gb(e,u),Hb(e,o),Rh(e.outputs,o.outputs),wt(o)&&o.data.animation){let l=e.data;l.animation=(l.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===bm&&(n=!1)}}t=Object.getPrototypeOf(t)}zb(r)}function Hb(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function zb(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Ir(o.hostAttrs,n=Ir(n,o.hostAttrs))}}function vl(e){return e===qt?{}:e===Ie?[]:e}function qb(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function Gb(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function Wb(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}function Kb(e,t,n,r,o,i,s,a){if(n.firstCreatePass){e.mergedAttrs=Ir(e.mergedAttrs,e.attrs);let l=e.tView=od(2,e,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),l.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),_r(e,!1);let c=Zb(n,t,e,r);$s()&&ld(n,t,c,e),Sr(c,t);let u=om(c,t,c,e);t[r+ve]=u,sd(t,u),Cb(u,e,t)}function aa(e,t,n,r,o,i,s,a,c,u,l){let d=n+ve,h;if(t.firstCreatePass){if(h=Da(t,d,4,s||null,a||null),u!=null){let f=Et(t.consts,u);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[d];return Kb(h,e,t,n,r,o,i,c),u!=null&&fd(e,h,l),h}var Zb=Yb;function Yb(e,t,n,r){return Us(!0),t[W].createComment("")}var wd=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Cm(e){return typeof e=="function"&&e[De]!==void 0}function Ed(e){return Cm(e)&&typeof e.set=="function"}var Dd=new R("");function Wo(e){return!!e&&typeof e.then=="function"}function Im(e){return!!e&&typeof e.subscribe=="function"}var _d=new R("");function Sm(e){return Gt([{provide:_d,multi:!0,useValue:e}])}var bd=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=y(_d,{optional:!0})??[];injector=y(Je);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=Se(this.injector,o);if(Wo(i))n.push(i);else if(Im(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ca=new R("");function Tm(){zc(()=>{let e="";throw new b(600,e)})}function Am(e){return e.isBoundToModule}var Qb=10;var Or=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=y(rt);afterRenderManager=y(jg);zonelessEnabled=y(Ro);rootEffectScheduler=y(fl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new le;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=y(Jt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Q(n=>!n))}constructor(){y(Ho,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=y(de);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Je.NULL){return this._injector.get(Oe).run(()=>{q($.BootstrapComponentStart);let s=n instanceof _a;if(!this._injector.get(bd).done){let p="";throw new b(405,p)}let c;s?c=n:c=this._injector.get(zo).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=Am(c)?void 0:this._injector.get(Rr),l=r||c.selector,d=c.create(o,[],l,u),h=d.location.nativeElement,f=d.injector.get(Dd,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),No(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),q($.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){q($.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(cd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw q($.ChangeDetectionEnd),new b(101,!1);let n=I(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,I(n),this.afterTick.next(),q($.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(On,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Qb;){q($.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{q($.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!So(o))continue;let i=r&&!this.zonelessEnabled?0:1;em(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>So(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;No(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(Ca,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>No(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function No(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ia(e,t,n,r){let o=P(),i=Yt();if(qe(o,i,t)){let s=oe(),a=Ao();D_(a,o,e,t,n,r)}return Ia}var aP=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Bl=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),o=Math.max(t,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t))}};function yl(e,t,n,r,o){return e===n&&Object.is(t,r)?1:Object.is(o(e,t),o(n,r))?-1:0}function Jb(e,t,n,r){let o,i,s=0,a=e.length-1,c=void 0;if(Array.isArray(t)){I(r);let u=t.length-1;for(I(null);s<=a&&s<=u;){let l=e.at(s),d=t[s],h=yl(s,l,s,d,n);if(h!==0){h<0&&e.updateValue(s,d),s++;continue}let f=e.at(a),p=t[u],g=yl(a,f,u,p,n);if(g!==0){g<0&&e.updateValue(a,p),a--,u--;continue}let v=n(s,l),m=n(a,f),L=n(s,d);if(Object.is(L,m)){let E=n(u,p);Object.is(E,v)?(e.swap(s,a),e.updateValue(a,p),u--,a--):e.move(a,s),e.updateValue(s,d),s++;continue}if(o??=new ca,i??=qp(e,s,a,n),Vl(e,o,s,L))e.updateValue(s,d),s++,a++;else if(i.has(L))o.set(v,e.detach(s)),a--;else{let E=e.create(s,t[s]);e.attach(s,E),s++,a++}}for(;s<=u;)zp(e,o,n,s,t[s]),s++}else if(t!=null){I(r);let u=t[Symbol.iterator]();I(null);let l=u.next();for(;!l.done&&s<=a;){let d=e.at(s),h=l.value,f=yl(s,d,s,h,n);if(f!==0)f<0&&e.updateValue(s,h),s++,l=u.next();else{o??=new ca,i??=qp(e,s,a,n);let p=n(s,h);if(Vl(e,o,s,p))e.updateValue(s,h),s++,a++,l=u.next();else if(!i.has(p))e.attach(s,e.create(s,h)),s++,a++,l=u.next();else{let g=n(s,d);o.set(g,e.detach(s)),a--}}}for(;!l.done;)zp(e,o,n,e.length,l.value),l=u.next()}for(;s<=a;)e.destroy(e.detach(a--));o?.forEach(u=>{e.destroy(u)})}function Vl(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function zp(e,t,n,r,o){if(Vl(e,t,r,n(r,o)))e.updateValue(r,o);else{let i=e.create(r,o);e.attach(r,i)}}function qp(e,t,n,r){let o=new Set;for(let i=t;i<=n;i++)o.add(r(i,e.at(i)));return o}var ca=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),t(r,n)}}};function Xb(e,t,n,r,o,i,s,a){Ln("NgControlFlow");let c=P(),u=oe(),l=Et(u.consts,i);return aa(c,u,e,t,n,r,o,l,256,s,a),Cd}function Cd(e,t,n,r,o,i,s,a){Ln("NgControlFlow");let c=P(),u=oe(),l=Et(u.consts,i);return aa(c,u,e,t,n,r,o,l,512,s,a),Cd}function eC(e,t){Ln("NgControlFlow");let n=P(),r=Yt(),o=n[r]!==Te?n[r]:-1,i=o!==-1?ua(n,ve+o):void 0,s=0;if(qe(n,r,e)){let a=I(null);try{if(i!==void 0&&sm(i,s),e!==-1){let c=ve+e,u=ua(n,c),l=Gl(n[S],c),d=cm(u,l,n),h=wa(n,l,t,{dehydratedView:d});Ea(u,h,s,Oo(l,d))}}finally{I(a)}}else if(i!==void 0){let a=im(i,s);a!==void 0&&(a[ne]=t)}}var Hl=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ee}};function tC(e,t){return t}var zl=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function nC(e,t,n,r,o,i,s,a,c,u,l,d,h){Ln("NgControlFlow");let f=P(),p=oe(),g=c!==void 0,v=P(),m=a?s.bind(v[ke][ne]):s,L=new zl(g,m);v[ve+e]=L,aa(f,p,e+1,t,n,r,o,Et(p.consts,i),256),g&&aa(f,p,e+2,c,u,l,d,Et(p.consts,h),512)}var ql=class extends Bl{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ee}at(t){return this.getLView(t)[ne].$implicit}attach(t,n){let r=n[yr];this.needsIndexUpdate||=t!==this.length,Ea(this.lContainer,n,t,Oo(this.templateTNode,r)),oC(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,iC(this.lContainer,t),sC(this.lContainer,t)}create(t,n){let r=Nl(this.lContainer,this.templateTNode.tView.ssrId);return wa(this.hostLView,this.templateTNode,new Hl(this.lContainer,n,t),{dehydratedView:r})}destroy(t){va(t[S],t)}updateValue(t,n){this.getLView(t)[ne].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[ne].$index=t}getLView(t){return aC(this.lContainer,t)}};function rC(e){let t=I(null),n=Dt();try{let r=P(),o=r[S],i=r[n],s=n+1,a=ua(r,s);if(i.liveCollection===void 0){let u=Gl(o,s);i.liveCollection=new ql(a,r,u)}else i.liveCollection.reset();let c=i.liveCollection;if(Jb(c,e,i.trackByFn,t),c.updateIndexes(),i.hasEmptyBlock){let u=Yt(),l=c.length===0;if(qe(r,u,l)){let d=n+2,h=ua(r,d);if(l){let f=Gl(o,d),p=cm(h,f,r),g=wa(r,f,void 0,{dehydratedView:p});Ea(h,g,0,Oo(f,p))}else o.firstUpdatePass&&q_(h),sm(h,0)}}}finally{I(t)}}function ua(e,t){return e[t]}function oC(e,t){if(e.length<=ee)return;let n=ee+t,r=e[n],o=r?r[Tn]:void 0;if(r&&o&&o.detachedLeaveAnimationFns&&o.detachedLeaveAnimationFns.length>0){let i=r[Nt];YD(i,o),xn.delete(r),o.detachedLeaveAnimationFns=void 0}}function iC(e,t){if(e.length<=ee)return;let n=ee+t,r=e[n],o=r?r[Tn]:void 0;o&&o.leave&&o.leave.size>0&&(o.detachedLeaveAnimationFns=[])}function sC(e,t){return Po(e,t)}function aC(e,t){return im(e,t)}function Gl(e,t){return Io(e,t)}function Rm(e,t,n){let r=P(),o=Yt();if(qe(r,o,t)){let i=oe(),s=Ao();qg(s,r,e,t,r[W],n)}return Rm}function Wl(e,t,n,r,o){hd(t,e,n,o?"class":"style",r)}function Id(e,t,n,r){let o=P(),i=o[S],s=e+ve,a=i.firstCreatePass?fm(s,o,2,t,E_,Xh(),n,r):i.data[s];if(Wg(a,o,e,t,Nm),Ns(a)){let c=o[S];zg(c,o,a),bg(c,a,o)}return r!=null&&fd(o,a),Id}function Sd(){let e=oe(),t=ye(),n=Kg(t);return e.firstCreatePass&&hm(e,n),Yu(n)&&Qu(),Zu(),n.classesWithoutHost!=null&&rD(n)&&Wl(e,n,P(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&oD(n)&&Wl(e,n,P(),n.stylesWithoutHost,!1),Sd}function Sa(e,t,n,r){return Id(e,t,n,r),Sd(),Sa}function Td(e,t,n,r){let o=P(),i=o[S],s=e+ve,a=i.firstCreatePass?sb(s,i,2,t,n,r):i.data[s];return Wg(a,o,e,t,Nm),r!=null&&fd(o,a),Td}function Ad(){let e=ye(),t=Kg(e);return Yu(t)&&Qu(),Zu(),Ad}function Mm(e,t,n,r){return Td(e,t,n,r),Ad(),Mm}var Nm=(e,t,n,r,o)=>(Us(!0),Sg(t[W],r,vp()));function cC(){return P()}function xm(e,t,n){let r=P(),o=Yt();if(qe(r,o,t)){let i=oe(),s=Ao();Gg(s,r,e,t,r[W],n)}return xm}var Ko="en-US";var uC=Ko;function Om(e){typeof e=="string"&&(uC=e.toLowerCase().replace(/_/g,"-"))}function Ta(e,t,n){let r=P(),o=oe(),i=ye();return Pm(o,r,r[W],i,e,t,n),Ta}function km(e,t,n){let r=P(),o=oe(),i=ye();return(i.type&3||n)&&gm(i,o,r,n,r[W],e,t,Ks(i,r,t)),km}function Pm(e,t,n,r,o,i,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Ks(r,t,i),gm(r,e,t,s,n,o,i,c)&&(a=!1)),a){let u=r.outputs?.[o],l=r.hostDirectiveOutputs?.[o];if(l&&l.length)for(let d=0;d<l.length;d+=2){let h=l[d],f=l[d+1];c??=Ks(r,t,i),Up(r,t,h,f,o,c)}if(u&&u.length)for(let d of u)c??=Ks(r,t,i),Up(r,t,d,o,o,c)}}function lC(e=1){return pp(e)}function Aa(e,t,n,r){return xb(e,t,n,r),Aa}function Rd(e){let t=P(),n=oe(),r=rl();Ls(r+1);let o=vd(n,r);if(e.dirty&&Gh(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=Lb(t,r);e.reset(i,vD),e.notifyOnChanges()}return!0}return!1}function Md(){return Mb(P(),rl())}function Hs(e,t){return e<<17|t<<2}function kn(e){return e>>17&32767}function dC(e){return(e&2)==2}function fC(e,t){return e&131071|t<<17}function Kl(e){return e|2}function Mr(e){return(e&131068)>>2}function wl(e,t){return e&-131069|t<<2}function hC(e){return(e&1)===1}function Zl(e){return e|1}function pC(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=kn(s),c=Mr(s);e[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||vr(d,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let h=kn(e[a+1]);e[r+1]=Hs(h,a),h!==0&&(e[h+1]=wl(e[h+1],r)),e[a+1]=fC(e[a+1],r)}else e[r+1]=Hs(a,0),a!==0&&(e[a+1]=wl(e[a+1],r)),a=r;else e[r+1]=Hs(c,0),a===0?a=r:e[c+1]=wl(e[c+1],r),c=r;u&&(e[r+1]=Kl(e[r+1])),Gp(e,l,r,!0),Gp(e,l,r,!1),gC(t,l,e,r,i),s=Hs(a,c),i?t.classBindings=s:t.styleBindings=s}function gC(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&vr(i,t)>=0&&(n[r+1]=Zl(n[r+1]))}function Gp(e,t,n,r){let o=e[n+1],i=t===null,s=r?kn(o):Mr(o),a=!1;for(;s!==0&&(a===!1||i);){let c=e[s],u=e[s+1];mC(c,t)&&(a=!0,e[s+1]=r?Zl(u):Kl(u)),s=r?kn(u):Mr(u)}a&&(e[n+1]=r?Kl(o):Zl(o))}function mC(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?vr(e,t)>=0:!1}var st={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vC(e){return e.substring(st.key,st.keyEnd)}function yC(e){return wC(e),Lm(e,Fm(e,0,st.textEnd))}function Lm(e,t){let n=st.textEnd;return n===t?-1:(t=st.keyEnd=EC(e,st.key=t,n),Fm(e,t,n))}function wC(e){st.key=0,st.keyEnd=0,st.value=0,st.valueEnd=0,st.textEnd=e.length}function Fm(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function EC(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function jm(e,t,n){return Um(e,t,n,!1),jm}function $m(e,t){return Um(e,t,null,!0),$m}function DC(e){bC(RC,_C,e,!0)}function _C(e,t){for(let n=yC(t);n>=0;n=Lm(t,n))Ts(e,vC(t),!0)}function Um(e,t,n,r){let o=P(),i=oe(),s=ks(2);if(i.firstUpdatePass&&Vm(i,e,s,r),t!==Te&&qe(o,s,t)){let a=i.data[Dt()];Hm(i,a,o,o[W],e,o[s+1]=NC(t,n),r,s)}}function bC(e,t,n,r){let o=oe(),i=ks(2);o.firstUpdatePass&&Vm(o,null,i,r);let s=P();if(n!==Te&&qe(s,i,n)){let a=o.data[Dt()];if(zm(a,r)&&!Bm(o,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Ds(c,n||"")),Wl(o,a,s,n,r)}else MC(o,a,s,s[W],s[i+1],s[i+1]=AC(e,t,n),r,i)}}function Bm(e,t){return t>=e.expandoStartIndex}function Vm(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[Dt()],s=Bm(e,n);zm(i,r)&&t===null&&!s&&(t=!1),t=CC(o,i,t,r),pC(o,i,t,n,s,r)}}function CC(e,t,n,r){let o=lp(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=El(null,e,t,n,r),n=Fo(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=El(o,e,t,n,r),i===null){let c=IC(e,t,r);c!==void 0&&Array.isArray(c)&&(c=El(null,e,t,c[1],r),c=Fo(c,t.attrs,r),SC(e,t,r,c))}else i=TC(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function IC(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Mr(r)!==0)return e[kn(r)]}function SC(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[kn(o)]=r}function TC(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=Fo(r,s,n)}return Fo(r,t.attrs,n)}function El(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=Fo(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Fo(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Ts(e,s,n?!0:t[++i]))}return e===void 0?null:e}function AC(e,t,n){if(n==null||n==="")return Ie;let r=[],o=Vo(n);if(Array.isArray(o))for(let i=0;i<o.length;i++)e(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&e(r,i,o[i]);else typeof o=="string"&&t(r,o);return r}function RC(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&Ts(e,r,n)}function MC(e,t,n,r,o,i,s,a){o===Te&&(o=Ie);let c=0,u=0,l=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;l!==null||d!==null;){let h=c<o.length?o[c+1]:void 0,f=u<i.length?i[u+1]:void 0,p=null,g;l===d?(c+=2,u+=2,h!==f&&(p=d,g=f)):d===null||l!==null&&l<d?(c+=2,p=l):(u+=2,p=d,g=f),p!==null&&Hm(e,t,n,r,p,g,s,a),l=c<o.length?o[c]:null,d=u<i.length?i[u]:null}}function Hm(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],l=hC(u)?Wp(c,t,n,o,Mr(u),s):void 0;if(!la(l)){la(i)||dC(u)&&(i=Wp(c,null,n,o,a,s));let d=Hu(Dt(),n);d_(r,s,d,o,i)}}function Wp(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let c=e[o],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[o+1];h===Te&&(h=d?Ie:void 0);let f=d?As(h,r):l===r?h:void 0;if(u&&!la(f)&&(f=As(c,r)),la(f)&&(a=f,s))return a;let p=e[o+1];o=s?kn(p):Mr(p)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=As(c,r))}return a}function la(e){return e!==void 0}function NC(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Mt(Vo(e)))),e}function zm(e,t){return(e.flags&(t?8:16))!==0}function xC(e,t=""){let n=P(),r=oe(),o=e+ve,i=r.firstCreatePass?Da(r,o,1,t,null):r.data[o],s=OC(r,n,i,t,e);n[o]=s,$s()&&ld(r,n,s,i),_r(i,!1)}var OC=(e,t,n,r,o)=>(Us(!0),RD(t[W],r));function kC(e,t,n,r=""){return qe(e,Yt(),n)?t+bn(n)+r:Te}function PC(e,t,n,r,o,i=""){let s=ip(),a=cb(e,s,n,o);return ks(2),a?t+bn(n)+r+bn(o)+i:Te}function qm(e){return Nd("",e),qm}function Nd(e,t,n){let r=P(),o=kC(r,e,t,n);return o!==Te&&Wm(r,Dt(),o),Nd}function Gm(e,t,n,r,o){let i=P(),s=PC(i,e,t,n,r,o);return s!==Te&&Wm(i,Dt(),s),Gm}function Wm(e,t,n){let r=Hu(t,e);MD(e[W],r,n)}function Km(e,t,n){Ed(t)&&(t=t());let r=P(),o=Yt();if(qe(r,o,t)){let i=oe(),s=Ao();qg(s,r,e,t,r[W],n)}return Km}function LC(e,t){let n=Ed(e);return n&&e.set(t),n}function Zm(e,t){let n=P(),r=oe(),o=ye();return Pm(r,n,n[W],o,e,t),Zm}function Kp(e,t,n){let r=oe();r.firstCreatePass&&Ym(t,r.data,r.blueprint,wt(e),n)}function Ym(e,t,n,r,o){if(e=me(e),Array.isArray(e))for(let i=0;i<e.length;i++)Ym(e[i],t,n,r,o);else{let i=oe(),s=P(),a=ye(),c=yn(e)?e:me(e.provide),u=Fu(e),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(yn(e)||!e.multi){let f=new Nn(u,o,Ae,null),p=_l(c,t,o?l:l+h,d);p===-1?(Cl(Js(a,s),i,c),Dl(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=_l(c,t,l+h,d),p=_l(c,t,l,l+h),g=f>=0&&n[f],v=p>=0&&n[p];if(o&&!v||!o&&!g){Cl(Js(a,s),i,c);let m=$C(o?jC:FC,n.length,o,r,u,e);!o&&v&&(n[p].providerFactory=m),Dl(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)}else{let m=Qm(n[o?p:f],u,!o&&r);Dl(i,e,f>-1?f:p,m)}!o&&r&&v&&n[p].componentProviders++}}}function Dl(e,t,n,r){let o=yn(t),i=Vh(t);if(o||i){let c=(i?me(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function Qm(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function _l(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function FC(e,t,n,r,o){return Yl(this.multi,[])}function jC(e,t,n,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=xo(r,r[S],this.providerFactory.index,o);s=c.slice(0,a),Yl(i,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Yl(i,s);return s}function Yl(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function $C(e,t,n,r,o,i){let s=new Nn(e,n,Ae,null);return s.multi=[],s.index=t,s.componentProviders=0,Qm(s,o,r&&!n),s}function UC(e,t){return n=>{n.providersResolver=(r,o)=>Kp(r,o?o(e):e,!1),t&&(n.viewProvidersResolver=(r,o)=>Kp(r,o?o(t):t,!0))}}function BC(e,t,n){let r=nl()+e,o=P();return o[r]===Te?pm(o,r,n?t.call(n):t()):ab(o,r)}function VC(e,t,n,r){return zC(P(),nl(),e,t,n,r)}function HC(e,t){let n=e[t];return n===Te?void 0:n}function zC(e,t,n,r,o,i){let s=t+n;return qe(e,s,o)?pm(e,s+1,i?r.call(i,o):r(o)):HC(e,s+1)}var da=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},xd=(()=>{class e{compileModuleSync(n){return new sa(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=Au(n),i=Og(o.declarations).reduce((s,a)=>{let c=zt(a);return c&&s.push(new Ar(c)),s},[]);return new da(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Jm=(()=>{class e{applicationErrorHandler=y(rt);appRef=y(Or);taskService=y(Jt);ngZone=y(Oe);zonelessEnabled=y(Ro);tracing=y(Ho,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(go):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(y(dl,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?cl:al;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(go+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Xm(){return[{provide:mr,useExisting:Jm},{provide:Oe,useClass:mo},{provide:Ro,useValue:!0}]}function qC(){return typeof $localize<"u"&&$localize.locale||Ko}var Od=new R("",{factory:()=>y(Od,{optional:!0,skipSelf:!0})||qC()});var Zo=class{destroyed=!1;listeners=null;errorHandler=y(Xe,{optional:!0});destroyRef=y(xt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new b(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed){console.warn(En(953,!1));return}if(this.listeners===null)return;let n=I(null);try{for(let r of this.listeners)try{r(t)}catch(o){this.errorHandler?.handleError(o)}}finally{I(n)}}};function kd(e,t){return Hi(e,t?.equal)}var Na=Symbol("InputSignalNode#UNSET"),rv=Y(w({},zi),{transformFn:void 0,applyValueToInputSignal(e,t){ir(e,t)}});function ov(e,t){let n=Object.create(rv);n.value=e,n.transformFn=t?.transform;function r(){if(rr(n),n.value===Na){let o=null;throw new b(-950,o)}return n.value}return r[De]=n,r}var Ma=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Uo(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function MU(e){return new Zo}function ev(e,t){return ov(e,t)}function nI(e){return ov(Na,e)}var iv=(ev.required=nI,ev);function sv(e,t){let n=Object.create(rv),r=new Zo;n.value=e;function o(){return rr(n),tv(n.value),n.value}return o[De]=n,o.asReadonly=Bs.bind(o),o.set=i=>{n.equal(n.value,i)||(ir(n,i),r.emit(i))},o.update=i=>{tv(n.value),o.set(i(n.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function tv(e){if(e===Na)throw new b(952,!1)}function nv(e,t){return sv(e,t)}function rI(e){return sv(Na,e)}var NU=(nv.required=rI,nv);var Pd=new R(""),oI=new R("");function Yo(e){return!e.moduleRef}function iI(e){let t=Yo(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Oe);return n.run(()=>{Yo(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(rt),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),Yo(e)){let i=()=>t.destroy(),s=e.platformInjector.get(Pd);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Pd);s.add(i),e.moduleRef.onDestroy(()=>{No(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return aI(r,n,()=>{let i=t.get(Jt),s=i.add(),a=t.get(bd);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Od,Ko);if(Om(c||Ko),!t.get(oI,!0))return Yo(e)?t.get(Or):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Yo(e)){let l=t.get(Or);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return sI?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void i.remove(s))})})}var sI;function aI(e,t,n){try{let r=n();return Wo(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Ra=null;function cI(e=[],t){return Je.create({name:t,providers:[{provide:Eo,useValue:"platform"},{provide:Pd,useValue:new Set([()=>Ra=null])},...e]})}function uI(e=[]){if(Ra)return Ra;let t=cI(e);return Ra=t,Tm(),lI(t),t}function lI(e){let t=e.get(ha,null);Se(e,()=>{t?.forEach(n=>n())})}function xU(){return!1}var Qo=(()=>{class e{static __NG_ELEMENT_ID__=dI}return e})();function dI(e){return fI(ye(),P(),(e&16)===16)}function fI(e,t,n){if(Zt(e)&&!n){let r=He(e.index,t);return new Xt(r,r)}else if(e.type&175){let r=t[ke];return new Xt(r,t)}return null}function av(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:o}=e;q($.BootstrapApplicationStart);try{let i=o?.injector??uI(r),s=[Xm(),Dp,...n||[]],a=new Lo({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return iI({r3Injector:a.injector,platformInjector:i,rootComponent:t})}catch(i){return Promise.reject(i)}finally{q($.BootstrapApplicationEnd)}}function xa(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var cv=null;function Lt(){return cv}function Ld(e){cv??=e}var Jo=class{},Oa=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>y(uv),providedIn:"platform"})}return e})();var uv=(()=>{class e extends Oa{_location;_history;_doc=y(ae);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lt().getBaseHref(this._doc)}onPopState(n){let r=Lt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Lt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function fv(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function lv(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function en(e){return e&&e[0]!=="?"?`?${e}`:e}var kr=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>y(pI),providedIn:"root"})}return e})(),hI=new R(""),pI=(()=>{class e extends kr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return fv(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+en(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+en(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+en(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(O(Oa),O(hI,8))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Pr=(()=>{class e{_subject=new le;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=vI(lv(dv(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+en(r))}normalize(n){return e.stripTrailingSlash(mI(this._basePath,dv(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+en(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+en(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=en;static joinWithSlash=fv;static stripTrailingSlash=lv;static \u0275fac=function(r){return new(r||e)(O(kr))};static \u0275prov=A({token:e,factory:()=>gI(),providedIn:"root"})}return e})();function gI(){return new Pr(O(kr))}function mI(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function dv(e){return e.replace(/\/index.html$/,"")}function vI(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var hv=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=xr({type:e});static \u0275inj=Dn({})}return e})();function Fd(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var Xo=class{};var pv="browser";var ei=class{_doc;constructor(t){this._doc=t}manager},ka=(()=>{class e extends ei{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||e)(O(ae))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),Fa=new R(""),Bd=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let o=n.filter(s=>!(s instanceof ka));this._plugins=o.slice().reverse();let i=n.find(s=>s instanceof ka);i&&this._plugins.push(i)}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(O(Fa),O(Oe))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),jd="ng-app-id";function gv(e){for(let t of e)t.remove()}function mv(e,t){let n=t.createElement("style");return n.textContent=e,n}function EI(e,t,n,r){let o=e.head?.querySelectorAll(`style[${jd}="${t}"],link[${jd}="${t}"]`);if(o)for(let i of o)i.removeAttribute(jd),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function Ud(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Vd=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,EI(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,mv);r?.forEach(o=>this.addUsage(o,this.external,Ud))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(gv(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gv(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,mv(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,Ud(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(O(ae),O(fa),O(pa,8),O(Bo))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),$d={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hd=/%COMP%/g;var yv="%COMP%",DI=`_nghost-${yv}`,_I=`_ngcontent-${yv}`,bI=!0,CI=new R("",{factory:()=>bI});function II(e){return _I.replace(Hd,e)}function SI(e){return DI.replace(Hd,e)}function wv(e,t){return t.map(n=>n.replace(Hd,e))}var zd=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,o,i,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new ti(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof La?o.applyToHost(n):o instanceof ni&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case at.Emulated:i=new La(c,u,r,this.appId,l,s,a,d);break;case at.ShadowDom:return new Pa(c,n,r,s,a,this.nonce,d,u);case at.ExperimentalIsolatedShadowDom:return new Pa(c,n,r,s,a,this.nonce,d);default:i=new ni(c,u,r,l,s,a,d);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(O(Bd),O(Vd),O(fa),O(CI),O(ae),O(Oe),O(pa),O(Ho,8))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),ti=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS($d[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(vv(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(vv(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=$d[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=$d[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(Ot.DashCase|Ot.Important)?t.style.setProperty(n,r,o&Ot.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ot.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,o){if(typeof t=="string"&&(t=Lt().getGlobalEventTarget(this.doc,t),!t))throw new b(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function vv(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Pa=class extends ti{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,o,i,s,a,c){super(t,o,i,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=wv(r.id,u);for(let d of u){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=d,this.shadowRoot.appendChild(h)}let l=r.getExternalStyles?.();if(l)for(let d of l){let h=Ud(d,o);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ni=class extends ti{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,c){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?wv(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&xn.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},La=class extends ni{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,c){let u=o+"-"+r.id;super(t,n,r,i,s,a,c,u),this.contentAttr=II(u),this.hostAttr=SI(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var ja=class e extends Jo{supportsDOMEvents=!0;static makeCurrent(){Ld(new e)}onAndCancel(t,n,r,o){return t.addEventListener(n,r,o),()=>{t.removeEventListener(n,r,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=TI();return n==null?null:AI(n)}resetBaseElement(){ri=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fd(document.cookie,t)}},ri=null;function TI(){return ri=ri||document.head.querySelector("base"),ri?ri.getAttribute("href"):null}function AI(e){return new URL(e,document.baseURI).pathname}var RI=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),Ev=["alt","control","meta","shift"],MI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NI={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Dv=(()=>{class e extends ei{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lt().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ev.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=MI[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Ev.forEach(s=>{if(s!==o){let a=NI[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(O(ae))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})();function xI(e,t,n){let r=w({rootComponent:e,platformRef:n?.platformRef},OI(t));return av(r)}function OI(e){return{appProviders:[...jI,...e?.providers??[]],platformProviders:FI}}function kI(){ja.makeCurrent()}function PI(){return new Xe}function LI(){return Xl(document),document}var FI=[{provide:Bo,useValue:pv},{provide:ha,useValue:kI,multi:!0},{provide:ae,useFactory:LI}];var jI=[{provide:Eo,useValue:"root"},{provide:Xe,useFactory:PI},{provide:Fa,useClass:ka,multi:!0},{provide:Fa,useClass:Dv,multi:!0},zd,Vd,Bd,{provide:On,useExisting:zd},{provide:Xo,useClass:RI},[]];var _v=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(O(ae))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var N="primary",mi=Symbol("RouteTitle"),Zd=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vn(e){return new Zd(e)}function Nv(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=e[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function za(e){return new Promise((t,n)=>{e.pipe(At()).subscribe({next:r=>t(r),error:r=>n(r)})})}function UI(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!bt(e[n],t[n]))return!1;return!0}function bt(e,t){let n=e?Yd(e):void 0,r=t?Yd(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!xv(e[o],t[o]))return!1;return!0}function Yd(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function xv(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}else return e===t}function Ov(e){return e.length>0?e[e.length-1]:null}function zn(e){return ls(e)?e:Wo(e)?ie(Promise.resolve(e)):F(e)}function kv(e){return ls(e)?za(e):Promise.resolve(e)}var BI={exact:Lv,subset:Fv},Pv={exact:VI,subset:HI,ignored:()=>!0};function bv(e,t,n){return BI[n.paths](e.root,t.root,n.matrixParams)&&Pv[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function VI(e,t){return bt(e,t)}function Lv(e,t,n){if(!Un(e.segments,t.segments)||!Ba(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Lv(e.children[r],t.children[r],n))return!1;return!0}function HI(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>xv(e[n],t[n]))}function Fv(e,t,n){return jv(e,t,t.segments,n)}function jv(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!Un(o,n)||t.hasChildren()||!Ba(o,n,r))}else if(e.segments.length===n.length){if(!Un(e.segments,n)||!Ba(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!Fv(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!Un(e.segments,o)||!Ba(e.segments,o,r)||!e.children[N]?!1:jv(e.children[N],t,i,r)}}function Ba(e,t,n){return t.every((r,o)=>Pv[n](e[o].parameters,r.parameters))}var ut=class{root;queryParams;fragment;_queryParamMap;constructor(t=new U([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){return GI.serialize(this)}},U=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Va(this)}},tn=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Vn(this.parameters),this._parameterMap}toString(){return Uv(this)}};function zI(e,t){return Un(e,t)&&e.every((n,r)=>bt(n.parameters,t[r].parameters))}function Un(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function qI(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===N&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==N&&(n=n.concat(t(o,r)))}),n}var vi=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>new nn,providedIn:"root"})}return e})(),nn=class{parse(t){let n=new Jd(t);return new ut(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${oi(t.root,!0)}`,r=ZI(t.queryParams),o=typeof t.fragment=="string"?`#${WI(t.fragment)}`:"";return`${n}${r}${o}`}},GI=new nn;function Va(e){return e.segments.map(t=>Uv(t)).join("/")}function oi(e,t){if(!e.hasChildren())return Va(e);if(t){let n=e.children[N]?oi(e.children[N],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==N&&r.push(`${o}:${oi(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=qI(e,(r,o)=>o===N?[oi(e.children[N],!1)]:[`${o}:${oi(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[N]!=null?`${Va(e)}/${n[0]}`:`${Va(e)}/(${n.join("//")})`}}function $v(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $a(e){return $v(e).replace(/%3B/gi,";")}function WI(e){return encodeURI(e)}function Qd(e){return $v(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ha(e){return decodeURIComponent(e)}function Cv(e){return Ha(e.replace(/\+/g,"%20"))}function Uv(e){return`${Qd(e.path)}${KI(e.parameters)}`}function KI(e){return Object.entries(e).map(([t,n])=>`;${Qd(t)}=${Qd(n)}`).join("")}function ZI(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${$a(n)}=${$a(o)}`).join("&"):`${$a(n)}=${$a(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var YI=/^[^\/()?;#]+/;function qd(e){let t=e.match(YI);return t?t[0]:""}var QI=/^[^\/()?;=#]+/;function JI(e){let t=e.match(QI);return t?t[0]:""}var XI=/^[^=?&#]+/;function eS(e){let t=e.match(XI);return t?t[0]:""}var tS=/^[^&#]+/;function nS(e){let t=e.match(tS);return t?t[0]:""}var Jd=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new U([],{}):new U([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[N]=new U(t,n)),r}parseSegment(){let t=qd(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(t),new tn(Ha(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=JI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=qd(this.remaining);o&&(r=o,this.capture(r))}t[Ha(n)]=Ha(r)}parseQueryParam(t){let n=eS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=nS(this.remaining);s&&(r=s,this.capture(r))}let o=Cv(n),i=Cv(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qd(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new b(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=N);let s=this.parseChildren();n[i??N]=Object.keys(s).length===1&&s[N]?s[N]:new U([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new b(4011,!1)}};function Bv(e){return e.segments.length>0?new U([],{[N]:e}):e}function Vv(e){let t={};for(let[r,o]of Object.entries(e.children)){let i=Vv(o);if(r===N&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new U(e.segments,t);return rS(n)}function rS(e){if(e.numberOfChildren===1&&e.children[N]){let t=e.children[N];return new U(e.segments.concat(t.segments),t.children)}return e}function rn(e){return e instanceof ut}function Hv(e,t,n=null,r=null,o=new nn){let i=zv(e);return qv(i,t,n,r,o)}function zv(e){let t;function n(i){let s={};for(let c of i.children){let u=n(c);s[c.outlet]=u}let a=new U(i.url,s);return i===e&&(t=a),a}let r=n(e.root),o=Bv(r);return t??o}function qv(e,t,n,r,o){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Gd(i,i,i,n,r,o);let s=oS(t);if(s.toRoot())return Gd(i,i,new U([],{}),n,r,o);let a=iS(s,i,e),c=a.processChildren?si(a.segmentGroup,a.index,s.commands):Wv(a.segmentGroup,a.index,s.commands);return Gd(i,a.segmentGroup,c,n,r,o)}function qa(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ui(e){return typeof e=="object"&&e!=null&&e.outlets}function Iv(e,t,n){e||="\u0275";let r=new ut;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function Gd(e,t,n,r,o,i){let s={};for(let[u,l]of Object.entries(r??{}))s[u]=Array.isArray(l)?l.map(d=>Iv(u,d,i)):Iv(u,l,i);let a;e===t?a=n:a=Gv(e,t,n);let c=Bv(Vv(a));return new ut(c,s,o)}function Gv(e,t,n){let r={};return Object.entries(e.children).forEach(([o,i])=>{i===t?r[o]=n:r[o]=Gv(i,t,n)}),new U(e.segments,r)}var Ga=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&qa(r[0]))throw new b(4003,!1);let o=r.find(ui);if(o&&o!==Ov(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function oS(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Ga(!0,0,e);let t=0,n=!1,r=e.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Ga(n,t,r)}var Fr=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function iS(e,t,n){if(e.isAbsolute)return new Fr(t,!0,0);if(!n)return new Fr(t,!1,NaN);if(n.parent===null)return new Fr(n,!0,0);let r=qa(e.commands[0])?0:1,o=n.segments.length-1+r;return sS(n,o,e.numberOfDoubleDots)}function sS(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new b(4005,!1);o=r.segments.length}return new Fr(r,!1,o-i)}function aS(e){return ui(e[0])?e[0].outlets:{[N]:e}}function Wv(e,t,n){if(e??=new U([],{}),e.segments.length===0&&e.hasChildren())return si(e,t,n);let r=cS(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new U(e.segments.slice(0,r.pathIndex),{});return i.children[N]=new U(e.segments.slice(r.pathIndex),e.children),si(i,0,o)}else return r.match&&o.length===0?new U(e.segments,{}):r.match&&!e.hasChildren()?Xd(e,t,n):r.match?si(e,0,o):Xd(e,t,n)}function si(e,t,n){if(n.length===0)return new U(e.segments,{});{let r=aS(n),o={};if(Object.keys(r).some(i=>i!==N)&&e.children[N]&&e.numberOfChildren===1&&e.children[N].segments.length===0){let i=si(e.children[N],t,n);return new U(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Wv(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new U(e.segments,o)}}function cS(e,t,n){let r=0,o=t,i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;let s=e.segments[o],a=n[r];if(ui(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(o>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Tv(c,u,s))return i;r+=2}else{if(!Tv(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Xd(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let i=n[o];if(ui(i)){let c=uS(i.outlets);return new U(r,c)}if(o===0&&qa(n[0])){let c=e.segments[t];r.push(new tn(c.path,Sv(n[0]))),o++;continue}let s=ui(i)?i.outlets[N]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&qa(a)?(r.push(new tn(s,Sv(a))),o+=2):(r.push(new tn(s,{})),o++)}return new U(r,{})}function uS(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Xd(new U([],{}),0,r))}),t}function Sv(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Tv(e,t,n){return e==n.path&&bt(t,n.parameters)}var ai="imperative",fe=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(fe||{}),Fe=class{id;url;constructor(t,n){this.id=t,this.url=n}},Hn=class extends Fe{type=fe.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lt=class extends Fe{urlAfterRedirects;type=fe.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Re=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Re||{}),li=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(li||{}),Ct=class extends Fe{reason;code;type=fe.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ft=class extends Fe{reason;code;type=fe.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},$r=class extends Fe{error;target;type=fe.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},di=class extends Fe{urlAfterRedirects;state;type=fe.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wa=class extends Fe{urlAfterRedirects;state;type=fe.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ka=class extends Fe{urlAfterRedirects;state;shouldActivate;type=fe.GuardsCheckEnd;constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Za=class extends Fe{urlAfterRedirects;state;type=fe.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ya=class extends Fe{urlAfterRedirects;state;type=fe.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qa=class{route;type=fe.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ja=class{route;type=fe.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xa=class{snapshot;type=fe.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ec=class{snapshot;type=fe.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tc=class{snapshot;type=fe.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nc=class{snapshot;type=fe.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var fi=class{},Ur=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function lS(e){return!(e instanceof fi)&&!(e instanceof Ur)}function dS(e,t){return e.providers&&!e._injector&&(e._injector=Go(e.providers,t,`Route: ${e.path}`)),e._injector??t}function ct(e){return e.outlet||N}function fS(e,t){let n=e.filter(r=>ct(r)===t);return n.push(...e.filter(r=>ct(r)!==t)),n}function Hr(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var rc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hr(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new zr(this.rootInjector)}},zr=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new rc(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(O(de))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),oc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=ef(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=ef(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=tf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return tf(t,this._root).map(n=>n.value)}};function ef(e,t){if(e===t.value)return t;for(let n of t.children){let r=ef(e,n);if(r)return r}return null}function tf(e,t){if(e===t.value)return[t];for(let n of t.children){let r=tf(e,n);if(r.length)return r.unshift(t),r}return[]}var Le=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Lr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var hi=class extends oc{snapshot;constructor(t,n){super(t),this.snapshot=n,cf(this,t)}toString(){return this.snapshot.toString()}};function Kv(e){let t=hS(e),n=new ge([new tn("",{})]),r=new ge({}),o=new ge({}),i=new ge({}),s=new ge(""),a=new jt(n,r,i,s,o,N,e,t.root);return a.snapshot=t.root,new hi(new Le(a,[]),t)}function hS(e){let t={},n={},r={},i=new Bn([],t,r,"",n,N,e,null,{});return new pi("",new Le(i,[]))}var jt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,i,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(u=>u[mi]))??F(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(t=>Vn(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(t=>Vn(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ic(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:w(w({},t.params),e.params),data:w(w({},t.data),e.data),resolve:w(w(w(w({},e.data),t.data),o?.data),e._resolvedData)}:r={params:w({},e.params),data:w({},e.data),resolve:w(w({},e.data),e._resolvedData??{})},o&&Yv(o)&&(r.resolve[mi]=o.title),r}var Bn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[mi]}constructor(t,n,r,o,i,s,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},pi=class extends oc{url;constructor(t,n){super(n),this.url=t,cf(this,n)}toString(){return Zv(this._root)}};function cf(e,t){t.value._routerState=e,t.children.forEach(n=>cf(e,n))}function Zv(e){let t=e.children.length>0?` { ${e.children.map(Zv).join(", ")} } `:"";return`${e.value}${t}`}function Wd(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,bt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),bt(t.params,n.params)||e.paramsSubject.next(n.params),UI(t.url,n.url)||e.urlSubject.next(n.url),bt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function nf(e,t){let n=bt(e.params,t.params)&&zI(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||nf(e.parent,t.parent))}function Yv(e){return typeof e.title=="string"||e.title===null}var Qv=new R(""),uf=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=N;activateEvents=new be;deactivateEvents=new be;attachEvents=new be;detachEvents=new be;routerOutletData=iv();parentContexts=y(zr);location=y(Fn);changeDetector=y(Qo);inputBinder=y(uc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new rf(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=jn({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pn]})}return e})(),rf=class{route;childContexts;parent;outletData;constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===jt?this.route:t===zr?this.childContexts:t===Qv?this.outletData:this.parent.get(t,n)}},uc=new R("");var lf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=yd({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Sa(0,"router-outlet")},dependencies:[uf],encapsulation:2})}return e})();function df(e){let t=e.children&&e.children.map(df),n=t?Y(w({},e),{children:t}):w({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==N&&(n.component=lf),n}function pS(e,t,n){let r=gi(e,t._root,n?n._root:void 0);return new hi(r,t)}function gi(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=gS(e,t,n);return new Le(r,o)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>gi(e,a)),s}}let r=mS(t.value),o=t.children.map(i=>gi(e,i));return new Le(r,o)}}function gS(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return gi(e,r,o);return gi(e,r)})}function mS(e){return new jt(new ge(e.url),new ge(e.params),new ge(e.queryParams),new ge(e.fragment),new ge(e.data),e.outlet,e.component,e)}var Br=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Jv="ngNavigationCancelingError";function sc(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=rn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Xv(!1,Re.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function Xv(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Jv]=!0,n.cancellationCode=t,n}function vS(e){return ey(e)&&rn(e.url)}function ey(e){return!!e&&e[Jv]}var yS=(e,t,n,r)=>Q(o=>(new of(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)),of=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Wd(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=Lr(n);t.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Lr(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Lr(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=Lr(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new nc(i.value.snapshot))}),t.children.length&&this.forwardEvent(new ec(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(Wd(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wd(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},ac=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},jr=class{component;route;constructor(t,n){this.component=t,this.route=n}};function wS(e,t,n){let r=e._root,o=t?t._root:null;return ii(r,o,n,[r.value])}function ES(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function qr(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!_u(e)?e:t.get(e):r}function ii(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Lr(t);return e.children.forEach(s=>{DS(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ci(a,n.getContext(s),o)),o}function DS(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=_S(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new ac(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?ii(e,t,a?a.children:null,r,o):ii(e,t,n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new jr(a.outlet.component,s))}else s&&ci(t,a,o),o.canActivateChecks.push(new ac(r)),i.component?ii(e,null,a?a.children:null,r,o):ii(e,null,n,r,o);return o}function _S(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Un(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Un(e.url,t.url)||!bt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nf(e,t)||!bt(e.queryParams,t.queryParams);case"paramsChange":default:return!nf(e,t)}}function ci(e,t,n){let r=Lr(e),o=e.value;Object.entries(r).forEach(([i,s])=>{o.component?t?ci(s,t.children.getContext(i),n):ci(s,null,n):ci(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new jr(t.outlet.component,o)):n.canDeactivateChecks.push(new jr(null,o)):n.canDeactivateChecks.push(new jr(null,o))}function yi(e){return typeof e=="function"}function bS(e){return typeof e=="boolean"}function CS(e){return e&&yi(e.canLoad)}function IS(e){return e&&yi(e.canActivate)}function SS(e){return e&&yi(e.canActivateChild)}function TS(e){return e&&yi(e.canDeactivate)}function AS(e){return e&&yi(e.canMatch)}function ty(e){return e instanceof pn||e?.name==="EmptyError"}var Ua=Symbol("INITIAL_VALUE");function Vr(){return pt(e=>nu(e.map(t=>t.pipe(Tt(1),iu(Ua)))).pipe(Q(t=>{for(let n of t)if(n!==!0){if(n===Ua)return Ua;if(n===!1||RS(n))return n}return!0}),Qe(t=>t!==Ua),Tt(1)))}function RS(e){return rn(e)||e instanceof Br}function ny(e){return e.aborted?F(void 0).pipe(Tt(1)):new j(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function ry(e){return lo(ny(e))}function MS(e,t){return _e(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?F(Y(w({},n),{guardsResult:!0})):NS(s,r,o,e).pipe(_e(a=>a&&bS(a)?xS(r,i,e,t):F(a)),Q(a=>Y(w({},n),{guardsResult:a})))})}function NS(e,t,n,r){return ie(e).pipe(_e(o=>FS(o.component,o.route,n,t,r)),At(o=>o!==!0,!0))}function xS(e,t,n,r){return ie(t).pipe(uo(o=>fr(kS(o.route.parent,r),OS(o.route,r),LS(e,o.path,n),PS(e,o.route,n))),At(o=>o!==!0,!0))}function OS(e,t){return e!==null&&t&&t(new tc(e)),F(!0)}function kS(e,t){return e!==null&&t&&t(new Xa(e)),F(!0)}function PS(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let o=r.map(i=>co(()=>{let s=Hr(t)??n,a=qr(i,s),c=IS(a)?a.canActivate(t,e):Se(s,()=>a(t,e));return zn(c).pipe(At())}));return F(o).pipe(Vr())}function LS(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>ES(s)).filter(s=>s!==null).map(s=>co(()=>{let a=s.guards.map(c=>{let u=Hr(s.node)??n,l=qr(c,u),d=SS(l)?l.canActivateChild(r,e):Se(u,()=>l(r,e));return zn(d).pipe(At())});return F(a).pipe(Vr())}));return F(i).pipe(Vr())}function FS(e,t,n,r,o){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return F(!0);let s=i.map(a=>{let c=Hr(t)??o,u=qr(a,c),l=TS(u)?u.canDeactivate(e,t,n,r):Se(c,()=>u(e,t,n,r));return zn(l).pipe(At())});return F(s).pipe(Vr())}function jS(e,t,n,r,o){let i=t.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(a=>{let c=qr(a,e),u=CS(c)?c.canLoad(t,n):Se(e,()=>c(t,n)),l=zn(u);return o?l.pipe(ry(o)):l});return F(s).pipe(Vr(),oy(r))}function oy(e){return Jc(Ce(t=>{if(typeof t!="boolean")throw sc(e,t)}),Q(t=>t===!0))}function $S(e,t,n,r,o){let i=t.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(a=>{let c=qr(a,e),u=AS(c)?c.canMatch(t,n):Se(e,()=>c(t,n)),l=zn(u);return o?l.pipe(ry(o)):l});return F(s).pipe(Vr(),oy(r))}var $n=class iy extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,iy.prototype)}},sf=class sy extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,sy.prototype)}};function US(e){throw new b(4e3,!1)}function BS(e){throw Xv(!1,Re.GuardRejected)}var VS=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return r;if(o.numberOfChildren>1||!o.children[N])throw US(`${t.redirectTo}`);o=o.children[N]}}async applyRedirectCommands(t,n,r,o,i){let s=await HS(n,o,i);if(s instanceof ut)throw new sf(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new sf(a);return a}applyRedirectCreateUrlTree(t,n,r,o){let i=this.createSegmentGroup(t,n.root,r,o);return new ut(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){let i=this.createSegments(t,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,o)}),new U(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new b(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}};function HS(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:u,data:l,title:d}=t;return za(zn(Se(n,()=>r({params:u,data:l,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:d}))))}var af={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zS(e,t,n,r,o,i){let s=ay(e,t,n);return s.matched?(r=dS(t,r),$S(r,t,n,o,i).pipe(Q(a=>a===!0?s:w({},af)))):F(s)}function ay(e,t,n){if(t.path==="**")return qS(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?w({},af):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||Nv)(n,e,t);if(!o)return w({},af);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?w(w({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function qS(e){return{matched:!0,parameters:e.length>0?Ov(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Av(e,t,n,r){return n.length>0&&KS(e,n,r)?{segmentGroup:new U(t,WS(r,new U(n,e.children))),slicedSegments:[]}:n.length===0&&ZS(e,n,r)?{segmentGroup:new U(e.segments,GS(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new U(e.segments,e.children),slicedSegments:n}}function GS(e,t,n,r){let o={};for(let i of n)if(lc(e,t,i)&&!r[ct(i)]){let s=new U([],{});o[ct(i)]=s}return w(w({},r),o)}function WS(e,t){let n={};n[N]=t;for(let r of e)if(r.path===""&&ct(r)!==N){let o=new U([],{});n[ct(r)]=o}return n}function KS(e,t,n){return n.some(r=>lc(e,t,r)&&ct(r)!==N)}function ZS(e,t,n){return n.some(r=>lc(e,t,r))}function lc(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function YS(e,t,n){return t.length===0&&!e.children[n]}var QS=class{};async function JS(e,t,n,r,o,i,s="emptyOnly",a){return new eT(e,t,n,r,o,s,i,a).recognize()}var XS=31,eT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,i,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new VS(this.urlSerializer,this.urlTree)}noMatchError(t){return new b(4002,`'${t.segmentGroup}'`)}async recognize(){let t=Av(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),o=new Le(r,n),i=new pi("",o),s=Hv(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}async match(t){let n=new Bn([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),N,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,N,n),rootSnapshot:n}}catch(r){if(r instanceof sf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $n?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,o,i){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,i);let s=await this.processSegment(t,n,r,r.segments,o,!0,i);return s instanceof Le?[s]:[]}async processChildren(t,n,r,o){let i=[];for(let c of Object.keys(r.children))c==="primary"?i.unshift(c):i.push(c);let s=[];for(let c of i){let u=r.children[c],l=fS(n,c),d=await this.processSegmentGroup(t,l,u,c,o);s.push(...d)}let a=cy(s);return tT(a),a}async processSegment(t,n,r,o,i,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??t,n,c,r,o,i,s,a)}catch(u){if(u instanceof $n||ty(u))continue;throw u}if(YS(r,o,i))return new QS;throw new $n(r)}async processSegmentAgainstRoute(t,n,r,o,i,s,a,c){if(ct(r)!==s&&(s===N||!lc(o,i,r)))throw new $n(o);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,o,r,i,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s,c);throw new $n(o)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:h}=ay(n,o,i);if(!c)throw new $n(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>XS&&(this.allowRedirects=!1));let f=new Bn(i,u,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Rv(o),ct(o),o.component??o._loadedComponent??null,o,Mv(o)),p=ic(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let g=await this.applyRedirects.applyRedirectCommands(l,o.redirectTo,d,f,t),v=await this.applyRedirects.lineralizeSegments(o,g);return this.processSegment(t,r,n,v.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,o,i,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await za(zS(n,r,o,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new $n(n);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,o),u=r._loadedInjector??t,{parameters:l,consumedSegments:d,remainingSegments:h}=a,f=new Bn(d,l,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Rv(r),ct(r),r.component??r._loadedComponent??null,r,Mv(r)),p=ic(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:g,slicedSegments:v}=Av(n,d,h,c);if(v.length===0&&g.hasChildren()){let E=await this.processChildren(u,c,g,f);return new Le(f,E)}if(c.length===0&&v.length===0)return new Le(f,[]);let m=ct(r)===i,L=await this.processSegment(u,c,g,v,m?N:i,!0,f);return new Le(f,L instanceof Le?[L]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await za(jS(t,n,r,this.urlSerializer,this.abortSignal))){let i=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=i.routes,n._loadedInjector=i.injector,i}throw BS(n)}return{routes:[],injector:t}}};function tT(e){e.sort((t,n)=>t.value.outlet===N?-1:n.value.outlet===N?1:t.value.outlet.localeCompare(n.value.outlet))}function nT(e){let t=e.value.routeConfig;return t&&t.path===""}function cy(e){let t=[],n=new Set;for(let r of e){if(!nT(r)){t.push(r);continue}let o=t.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=cy(r.children);t.push(new Le(r.value,o))}return t.filter(r=>!n.has(r))}function Rv(e){return e.data||{}}function Mv(e){return e.resolve||{}}var rT=new R("",{factory:()=>JS});function oT(e,t,n,r,o,i,s){let a=e.get(rT);return _e(c=>F(c).pipe(pt(u=>a(e,t,n,r,u.extractedUrl,o,i,s)),Q(({state:u,tree:l})=>Y(w({},c),{targetSnapshot:u,urlAfterRedirects:l}))))}function iT(e,t){return _e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return F(n);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let u of uy(c))s.add(u);let a=0;return ie(s).pipe(uo(c=>i.has(c)?sT(c,r,e,t):(c.data=ic(c,c.parent,e).resolve,F(void 0))),Ce(()=>a++),ps(1),_e(c=>a===s.size?F(n):Me))})}function uy(e){let t=e.children.map(n=>uy(n)).flat();return[e,...t]}function sT(e,t,n,r){let o=e.routeConfig,i=e._resolve;return o?.title!==void 0&&!Yv(o)&&(i[mi]=o.title),co(()=>(e.data=ic(e,e.parent,n).resolve,aT(i,e,t,r).pipe(Q(s=>(e._resolvedData=s,e.data=w(w({},e.data),s),null)))))}function aT(e,t,n,r){let o=Yd(e);if(o.length===0)return F({});let i={};return ie(o).pipe(_e(s=>cT(e[s],t,n,r).pipe(At(),Ce(a=>{if(a instanceof Br)throw sc(new nn,a);i[s]=a}))),ps(1),Q(()=>i),hr(s=>ty(s)?Me:tu(s)))}function cT(e,t,n,r){let o=Hr(t)??r,i=qr(e,o),s=i.resolve?i.resolve(t,n):Se(o,()=>i(t,n));return zn(s)}function Kd(e){return pt(t=>{let n=e(t);return n?ie(n).pipe(Q(()=>t)):F(t)})}var ff=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===N);return r}getResolvedTitleForRoute(n){return n.data[mi]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>y(ly),providedIn:"root"})}return e})(),ly=(()=>{class e extends ff{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(O(_v))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Gr=new R("",{factory:()=>({})}),wi=new R(""),dy=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=y(xd);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await kv(Se(n,()=>r.loadComponent())),s=await py(hy(i));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await fy(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=i.routes,r._loadedInjector=i.injector,i}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function fy(e,t,n,r){let o=await kv(Se(n,()=>e.loadChildren())),i=await py(hy(o)),s;i instanceof ba||Array.isArray(i)?s=i:s=await t.compileModuleAsync(i),r&&r(e);let a,c,u=!1;return Array.isArray(s)?(c=s,u=!0):(a=s.create(n).injector,c=a.get(wi,[],{optional:!0,self:!0}).flat()),{routes:c.map(df),injector:a}}function uT(e){return e&&typeof e=="object"&&"default"in e}function hy(e){return uT(e)?e.default:e}async function py(e){return e}var dc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>y(lT),providedIn:"root"})}return e})(),lT=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gy=new R("");var dT=()=>{},my=new R(""),vy=(()=>{class e{currentNavigation=ze(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ze(null);events=new le;transitionAbortWithErrorSubject=new le;configLoader=y(dy);environmentInjector=y(de);destroyRef=y(xt);urlSerializer=y(vi);rootContexts=y(zr);location=y(Pr);inputBindingEnabled=y(uc,{optional:!0})!==null;titleStrategy=y(ff);options=y(Gr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=y(dc);createViewTransition=y(gy,{optional:!0});navigationErrorHandler=y(my,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>F(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new Qa(o)),r=o=>this.events.next(new Ja(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ot(()=>{this.transitions?.next(Y(w({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new ge(null),this.transitions.pipe(Qe(r=>r!==null),pt(r=>{let o=!1,i=new AbortController;return F(r).pipe(pt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Re.SupersededByNewNavigation),Me;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Y(w({},a),{previousNavigation:null}):null,abort:()=>i.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new Ft(s.id,this.urlSerializer.serialize(s.rawUrl),"",li.IgnoredSameUrlNavigation)),s.resolve(!1),Me;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return F(s).pipe(pt(l=>(this.events.next(new Hn(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Me:Promise.resolve(l))),oT(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,i.signal),Ce(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=l.urlAfterRedirects,h));let d=new di(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=s,g=new Hn(l,this.urlSerializer.serialize(d),h,f);this.events.next(g);let v=Kv(this.rootComponentType).snapshot;return this.currentTransition=r=Y(w({},s),{targetSnapshot:v,urlAfterRedirects:d,extras:Y(w({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(m=>(m.finalUrl=d,m)),F(r)}else return this.events.next(new Ft(s.id,this.urlSerializer.serialize(s.extractedUrl),"",li.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Me}),Ce(s=>{let a=new Wa(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Q(s=>(this.currentTransition=r=Y(w({},s),{guards:wS(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),MS(this.environmentInjector,s=>this.events.next(s)),Ce(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw sc(this.urlSerializer,s.guardsResult);let a=new Ka(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Qe(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Re.GuardRejected),!1)),Kd(s=>{if(s.guards.canActivateChecks.length!==0)return F(s).pipe(Ce(a=>{let c=new Za(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),pt(a=>{let c=!1;return F(a).pipe(iT(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Re.NoDataFromResolver)}}))}),Ce(a=>{let c=new Ya(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Kd(s=>{let a=u=>{let l=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let d=Hr(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(d,u.routeConfig).then(h=>{u.component=h}))}for(let d of u.children)l.push(...a(d));return l},c=a(s.targetSnapshot.root);return c.length===0?F(s):ie(Promise.all(c).then(()=>s))}),Kd(()=>this.afterPreactivation()),pt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ie(c).pipe(Q(()=>r)):F(r)}),Q(s=>{let a=pS(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Y(w({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Ce(()=>{this.events.next(new fi)}),yS(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Tt(1),lo(ny(i.signal).pipe(Qe(()=>!o&&!r.targetRouterState),Ce(()=>{this.cancelNavigationTransition(r,i.signal.reason+"",Re.Aborted)}))),Ce({next:s=>{o=!0,this.currentNavigation.update(a=>(a.abort=dT,a)),this.lastSuccessfulNavigation.set(ot(this.currentNavigation)),this.events.next(new lt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),lo(this.transitionAbortWithErrorSubject.pipe(Ce(s=>{throw s}))),ou(()=>{i.abort(),o||this.cancelNavigationTransition(r,"",Re.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),hr(s=>{if(this.destroyed)return r.resolve(!1),Me;if(o=!0,ey(s))this.events.next(new Ct(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),vS(s)?this.events.next(new Ur(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new $r(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Se(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Br){let{message:u,cancellationCode:l}=sc(this.urlSerializer,c);this.events.next(new Ct(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ur(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Me}))}))}cancelNavigationTransition(n,r,o){let i=new Ct(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ot(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function fT(e){return e!==ai}var yy=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>y(hT),providedIn:"root"})}return e})(),cc=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},hT=(()=>{class e extends cc{static \u0275fac=(()=>{let n;return function(o){return(n||(n=$o(e)))(o||e)}})();static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),hf=(()=>{class e{urlSerializer=y(vi);options=y(Gr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=y(Pr);urlHandlingStrategy=y(dc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ut;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof ut?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=Kv(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>y(wy),providedIn:"root"})}return e})(),wy=(()=>{class e extends hf{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Hn?this.updateStateMemento():n instanceof Ft?this.commitTransition(r):n instanceof di?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof fi?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ct&&n.code!==Re.SupersededByNewNavigation&&n.code!==Re.Redirect?this.restoreHistory(r):n instanceof $r?this.restoreHistory(r,!0):n instanceof lt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,c=w(w({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",c)}else{let a=w(w({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=$o(e)))(o||e)}})();static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function pf(e,t){e.events.pipe(Qe(n=>n instanceof lt||n instanceof Ct||n instanceof $r||n instanceof Ft),Q(n=>n instanceof lt||n instanceof Ft?0:(n instanceof Ct?n.code===Re.Redirect||n.code===Re.SupersededByNewNavigation:!1)?2:1),Qe(n=>n!==2),Tt(1)).subscribe(()=>{t()})}var pT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wr=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=y(wd);stateManager=y(hf);options=y(Gr,{optional:!0})||{};pendingTasks=y(Jt);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=y(vy);urlSerializer=y(vi);location=y(Pr);urlHandlingStrategy=y(dc);injector=y(de);_events=new le;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=y(yy);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=y(wi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!y(uc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new pe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=ot(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Ct&&r.code!==Re.Redirect&&r.code!==Re.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof lt)this.navigated=!0;else if(r instanceof Ur){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=w({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fT(o.source)},s);this.scheduleNavigation(a,ai,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}lS(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ai,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=w({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(c=>{this.disposed||this.injector.get(rt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ot(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(df),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=w(w({},this.currentUrlTree.queryParams),i);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let h=o?o.snapshot:this.routerState.snapshot.root;d=zv(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return qv(d,n,l,u??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let o=rn(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ai,null,r)}navigate(n,r={skipLocationChange:!1}){return mT(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(En(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=w({},pT):r===!1?o=w({},gT):o=r,rn(n))return bv(this.currentUrlTree,n,o);let i=this.parseUrl(n);return bv(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,h)=>{a=d,c=h});let l=this.pendingTasks.add();return pf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function mT(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new b(4008,!1)}var fc=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ze(null);get href(){return ot(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new le;applicationErrorHandler=y(rt);options=y(Gr,{optional:!0});constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.reactiveHref.set(y(new Ma("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=o=>o==="merge"||o==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(o=>{o instanceof lt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(rn(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return this.routerLinkInput===null?null:rn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(Ae(Wr),Ae(jt),Uo("tabindex"),Ae(qo),Ae(kt),Ae(kr))};static \u0275dir=jn({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,o){r&1&&Ta("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ia("href",o.reactiveHref(),nd)("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xa],replaceUrl:[2,"replaceUrl","replaceUrl",xa],routerLink:"routerLink"},features:[Pn]})}return e})(),yT=(()=>{class e{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new be;link=y(fc,{optional:!0});constructor(n,r,o,i){this.router=n,this.element=r,this.renderer=o,this.cdr=i,this.routerEventsSubscription=n.events.subscribe(s=>{s instanceof lt&&this.update()})}ngAfterContentInit(){F(this.links.changes,F(null)).pipe(dr()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ie(n).pipe(dr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=wT(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let i=o.urlTree;return i?n.isActive(i,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||e)(Ae(Wr),Ae(kt),Ae(qo),Ae(Qo))};static \u0275dir=jn({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(r&1&&Aa(i,fc,5),r&2){let s;Rd(s=Md())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Pn]})}return e})();function wT(e){return!!e.paths}var ET=new R("");function DT(e,...t){return Gt([{provide:wi,multi:!0,useValue:e},[],{provide:jt,useFactory:_T},{provide:Ca,multi:!0,useFactory:bT},t.map(n=>n.\u0275providers)])}function _T(){return y(Wr).routerState.root}function bT(){let e=y(Je);return t=>{let n=e.get(Or);if(t!==n.components[0])return;let r=e.get(Wr),o=e.get(CT);e.get(IT)===1&&r.initialNavigation(),e.get(ST,null,{optional:!0})?.setUpPreloading(),e.get(ET,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var CT=new R("",{factory:()=>new le}),IT=new R("",{factory:()=>1});var ST=new R("");var gf={production:!1,supabaseUrl:"http://127.0.0.1:54321",supabaseAnonKey:"your-local-anon-key-here"};var Ey=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var Kr=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},Ei=class extends Kr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Zr=class extends Kr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Yr=class extends Kr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},hc=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(hc||{});var Di=class{constructor(t,{headers:n={},customFetch:r,region:o=hc.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=Ey(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Qi(this,arguments,void 0,function*(n,r={}){var o;let i,s;try{let{headers:a,method:c,body:u,signal:l,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let v=l;d&&(s=new AbortController,i=setTimeout(()=>s.abort(),d),l?(v=s.signal,l.addEventListener("abort",()=>s.abort())):v=s.signal);let m=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:v}).catch(B=>{throw new Ei(B)}),L=m.headers.get("x-relay-error");if(L&&L==="true")throw new Zr(m);if(!m.ok)throw new Yr(m);let E=((o=m.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return E==="application/json"?D=yield m.json():E==="application/octet-stream"||E==="application/pdf"?D=yield m.blob():E==="text/event-stream"?D=m:E==="multipart/form-data"?D=yield m.formData():D=yield m.text(),{data:D,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Yr||a instanceof Zr?a.context:void 0}}finally{i&&clearTimeout(i)}})}};var _y=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},TT=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let s=null,a=null,c=null,u=i.status,l=i.statusText;if(i.ok){var d,h;if(n.method!=="HEAD"){var f;let m=await i.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=m:a=JSON.parse(m))}let g=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&v&&v.length>1&&(c=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,l="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let g=await i.text();try{s=JSON.parse(g),Array.isArray(s)&&i.status===404&&(a=[],s=null,u=200,l="OK")}catch{i.status===404&&g===""?(u=204,l="No Content"):s={message:g}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,u=200,l="OK"),s&&n.shouldThrowOnError)throw new _y(s)}return{error:s,data:a,count:c,status:u,statusText:l}});return this.shouldThrowOnError||(o=o.catch(i=>{var s;let a="",c=i?.cause;if(c){var u,l,d,h;let p=(u=c?.message)!==null&&u!==void 0?u:"",g=(l=c?.code)!==null&&l!==void 0?l:"";a=`${(d=i?.name)!==null&&d!==void 0?d:"FetchError"}: ${i?.message}`,a+=`

Caused by: ${(h=c?.name)!==null&&h!==void 0?h:"Error"}: ${p}`,g&&(a+=` (${g})`),c?.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=i?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(s=i?.name)!==null&&s!==void 0?s:"FetchError"}: ${i?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(e,t)}returns(){return this}overrideTypes(){return this}},AT=class extends TT{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}={}){let i=o?`${o}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let o=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:i="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},Dy=new RegExp("[,()]"),Qr=class extends AT{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Dy.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Dy.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");let i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},RT=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){let{head:n=!1,count:r}=t??{},o=n?"HEAD":"GET",i=!1,s=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",s),r&&this.headers.append("Prefer",`count=${r}`),new Qr({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let i=e.reduce((s,a)=>s.concat(Object.keys(a)),[]);if(i.length>0){let s=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",s.join(","))}}return new Qr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){var i;let s="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){let c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Qr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;let r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Qr({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;let n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Qr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},by=class Cy{constructor(t,{headers:n={},schema:r,fetch:o}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new RT(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Cy(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:o=!1,count:i}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),u;r||o?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{c.searchParams.append(d,h)})):(a="POST",u=n);let l=new Headers(this.headers);return i&&l.set("Prefer",`count=${i}`),new Qr({method:a,url:c,headers:l,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var mf=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let n=process.versions;if(n&&n.node){let r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},vf=mf;var Iy="2.89.0";var Sy=`realtime-js/${Iy}`,yf="1.0.0",Ty="2.0.0",wf=yf;var _i=1e4,Ay=1e3,Ry=100,on=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(on||{}),ce=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(ce||{}),Ge=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(Ge||{}),Ef=(function(e){return e.websocket="websocket",e})(Ef||{}),qn=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(qn||{});var pc=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let o=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,r;let o=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var o,i;let s=t.topic,a=(o=t.ref)!==null&&o!==void 0?o:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,l=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(l).length===0?"":JSON.stringify(l);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+u.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,c.length),p.setUint8(g++,a.length),p.setUint8(g++,s.length),p.setUint8(g++,u.length),p.setUint8(g++,d.length),p.setUint8(g++,n),Array.from(c,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(a,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(s,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(u,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(d,m=>p.setUint8(g++,m.charCodeAt(0)));var v=new Uint8Array(f.byteLength+r.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(r),f.byteLength),v.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[o,i,s,a,c]=r;return n({join_ref:o,ref:i,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),o=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,r){let o=n.getUint8(1),i=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,u=r.decode(t.slice(c,c+o));c=c+o;let l=r.decode(t.slice(c,c+i));c=c+i;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:l,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var Jr=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var K=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(K||{}),_f=(e,t,n={})=>{var r;let o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=MT(s,e,t,o),i),{}):{}},MT=(e,t,n,r)=>{let o=t.find(a=>a.name===e),i=o?.type,s=n[e];return i&&!r.includes(i)?My(i,s):Df(s)},My=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return kT(t,n)}switch(e){case K.bool:return NT(t);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return xT(t);case K.json:case K.jsonb:return OT(t);case K.timestamp:return PT(t);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return Df(t);default:return Df(t)}},Df=e=>e,NT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xT=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},OT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},kT=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i,s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>My(t,a))}return e},PT=e=>typeof e=="string"?e.replace(" ","T"):e,gc=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var Xr=class{constructor(t,n,r={},o=_i){this.channel=t,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var bi=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{let{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,o,i,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{let{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=e.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,o){let i=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(i,(u,l)=>{s[u]||(c[u]=l)}),this.map(s,(u,l)=>{let d=i[u];if(d){let h=l.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),p=l.filter(v=>f.indexOf(v.presence_ref)<0),g=d.filter(v=>h.indexOf(v.presence_ref)<0);p.length>0&&(a[u]=p),g.length>0&&(c[u]=g)}else a[u]=l}),this.syncDiff(i,{joins:a,leaves:c},r,o)}static syncDiff(t,n,r,o){let{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,c)=>{var u;let l=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(c),l.length>0){let d=t[a].map(f=>f.presence_ref),h=l.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,l,c)}),this.map(s,(a,c)=>{let u=t[a];if(!u)return;let l=c.map(d=>d.presence_ref);u=u.filter(d=>l.indexOf(d.presence_ref)<0),t[a]=u,o(a,u,c),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let o=t[r];return"metas"in o?n[r]=o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ci=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(Ci||{}),$t=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})($t||{});var Ii=class e{constructor(t,n={config:{}},r){var o,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xr(this,Ge.join,this.params,this.timeout),this.rejoinTimer=new Jr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ge.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new bi(this),this.broadcastEndpointURL=gc(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,o,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,u=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&o!==void 0?o:[],l=!!this.bindings[Ci.PRESENCE]&&this.bindings[Ci.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.($t.CHANNEL_ERROR,f)),this._onClose(()=>t?.($t.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t?.($t.SUBSCRIBED);return}else{let g=this.bindings.postgres_changes,v=(p=g?.length)!==null&&p!==void 0?p:0,m=[];for(let L=0;L<v;L++){let E=g[L],{filter:{event:D,schema:B,table:ht,filter:G}}=E,Z=f&&f[L];if(Z&&Z.event===D&&e.isFilterValueEqual(Z.schema,B)&&e.isFilterValueEqual(Z.table,ht)&&e.isFilterValueEqual(Z.filter,G))m.push(Object.assign(Object.assign({},E),{id:Z.id}));else{this.unsubscribe(),this.state=ce.errored,t?.($t.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t($t.SUBSCRIBED);return}}).receive("error",f=>{this.state=ce.errored,t?.($t.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.($t.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ce.joined&&t===Ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");let i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);let s={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:i,payload:s}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{let u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=u.body)===null||o===void 0?void 0:o.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,a,c;let u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ce.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ge.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Xr(this,Ge.leave,{},t),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ce.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){let o=new AbortController,i=setTimeout(()=>o.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(i),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Xr(this,t,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ry){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var o,i;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=Ge;if(r&&[a,c,u,l].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(f=>{var p,g,v;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(i=this.bindings[s])===null||i===void 0||i.filter(f=>{var p,g,v,m,L,E;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let D=f.id,B=(p=f.filter)===null||p===void 0?void 0:p.event;return D&&((g=n.ids)===null||g===void 0?void 0:g.includes(D))&&(B==="*"||B?.toLocaleLowerCase()===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{let D=(L=(m=f?.filter)===null||m===void 0?void 0:m.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return D==="*"||D===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:g,table:v,commit_timestamp:m,type:L,errors:E}=p;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:m,eventType:L,new:{},old:{},errors:E}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let o=t.toLocaleLowerCase(),i={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!(((i=o.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&e.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ge.close,{},t)}_onError(t){this._on(Ge.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=_f(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=_f(t.columns,t.old_record)),n}};var bf=()=>{},mc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FT=[1e3,2e3,5e3,1e4],jT=1e4,$T=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Si=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_i,this.transport=null,this.heartbeatIntervalMs=mc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bf,this.ref=0,this.reconnectTimer=null,this.vsn=wf,this.logger=bf,this.conn=null,this.sendBuffer=[],this.serializer=new pc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ef.websocket}`,this.httpEndpoint=gc(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vf.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case on.connecting:return qn.Connecting;case on.open:return qn.Open;case on.closing:return qn.Closing;default:return qn.Closed}}isConnected(){return this.connectionState()===qn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{let i=new Ii(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){let{topic:n,event:r,payload:o,ref:i}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ay,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},mc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:o,payload:i,ref:s}=n,a=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${o} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(o,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===on.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===on.open||this.conn.readyState===on.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ge.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${r}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([$T],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{let i={access_token:n,version:Sy};n&&o.updateJoinPayload(i),o.joinedOnce&&o._isJoined()&&o._push(Ge.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Jr(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,o,i,s,a,c,u,l,d,h,f;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:_i,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:mc.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:bf,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:wf,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:p=>FT[p-1]||jT,this.vsn){case yf:this.encode=(l=t?.encode)!==null&&l!==void 0?l:(p,g)=>g(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,g)=>g(JSON.parse(p));break;case Ty:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var Ti=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function UT(e,t,n){let r=new URL(t,e);if(n)for(let[o,i]of Object.entries(n))i!==void 0&&r.searchParams.set(o,i);return r.toString()}async function BT(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function VT(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:o,body:i,headers:s}){let a=UT(e.baseUrl,r,o),c=await BT(e.auth),u=await t(a,{method:n,headers:w(w(w({},i?{"Content-Type":"application/json"}:{}),c),s),body:i?JSON.stringify(i):void 0}),l=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&l?JSON.parse(l):l;if(!u.ok){let f=d?h:void 0,p=f?.error;throw new Ti(p?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:u.status,headers:u.headers,data:h}}}}function vc(e){return e.join("")}var HT=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:vc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vc(e.namespace)}`}),!0}catch(t){if(t instanceof Ti&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Ti&&n.status===409)return;throw n}}};function eo(e){return e.join("")}var zT=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eo(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${eo(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${eo(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${eo(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eo(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${eo(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Ti&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Ti&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Ny=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=VT({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new HT(this.client,t),this.tableOps=new zT(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var yc=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function J(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var qT=class extends yc{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Sf=class extends yc{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}},Rf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GT=()=>Response,Tf=e=>{if(Array.isArray(e))return e.map(n=>Tf(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let o=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=Tf(r)}),t},WT=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},KT=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Ai(e){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(e)}function ZT(e,t){if(Ai(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ai(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YT(e){var t=ZT(e,"string");return Ai(t)=="symbol"?t:t+""}function QT(e,t,n){return(t=YT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xy(Object(n),!0).forEach(function(r){QT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Cf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},JT=async(e,t,n)=>{e instanceof await GT()&&!n?.noResolveJson?e.json().then(r=>{let o=e.status||500,i=r?.statusCode||o+"";t(new qT(Cf(r),o,i))}).catch(r=>{t(new Sf(Cf(r),r))}):t(new Sf(Cf(e),e))},XT=(e,t,n,r)=>{let o={method:e,headers:t?.headers||{}};return e==="GET"||!r?o:(WT(r)?(o.headers=T({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,t?.duplex&&(o.duplex=t.duplex),T(T({},o),n))};async function Mi(e,t,n,r,o,i){return new Promise((s,a)=>{e(n,XT(t,r,o,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>JT(c,a,r))})}async function Ri(e,t,n,r){return Mi(e,"GET",t,n,r)}async function dt(e,t,n,r,o){return Mi(e,"POST",t,r,o,n)}async function Af(e,t,n,r,o){return Mi(e,"PUT",t,r,o,n)}async function e0(e,t,n,r){return Mi(e,"HEAD",t,T(T({},n),{},{noResolveJson:!0}),r)}async function Mf(e,t,n,r,o){return Mi(e,"DELETE",t,r,o,n)}var t0=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(J(t))return{data:null,error:t};throw t}}},Py;Py=Symbol.toStringTag;var n0=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Py]="BlobDownloadBuilder",this.promise=null}asStream(){return new t0(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(J(t))return{data:null,error:t};throw t}}},r0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Oy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},o0=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Rf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var o=this;try{let i,s=T(T({},Oy),r),a=T(T({},o.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",o.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",o.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=o.toBase64(o.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=T(T({},a),r.headers));let u=o._removeEmptyFolders(t),l=o._getFinalPath(u),d=await(e=="PUT"?Af:dt)(o.fetch,`${o.url}/object/${l}`,i,T({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(o.shouldThrowOnError)throw i;if(J(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var o=this;let i=o._removeEmptyFolders(e),s=o._getFinalPath(i),a=new URL(o.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let c,u=T({upsert:Oy.upsert},r),l=T(T({},o.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType),{data:{path:i,fullPath:(await Af(o.fetch,a.toString(),c,{headers:l})).Key},error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(J(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e),o=T({},n.headers);t?.upsert&&(o["x-upsert"]="true");let i=await dt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(n.url+i.url),a=s.searchParams.get("token");if(!a)throw new yc("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await dt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(J(o))return{data:null,error:o};throw o}}async copy(e,t,n){var r=this;try{return{data:{path:(await dt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(J(o))return{data:null,error:o};throw o}}async createSignedUrl(e,t,n){var r=this;try{let o=r._getFinalPath(e),i=await dt(r.fetch,`${r.url}/object/sign/${o}`,T({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(J(o))return{data:null,error:o};throw o}}async createSignedUrls(e,t,n){var r=this;try{let o=await dt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(s=>T(T({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(J(o))return{data:null,error:o};throw o}}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),o=r?`?${r}`:"",i=this._getFinalPath(e),s=()=>Ri(this.fetch,`${this.url}/${n}/${i}${o}`,{headers:this.headers,noResolveJson:!0});return new n0(s,this.shouldThrowOnError)}async info(e){var t=this;let n=t._getFinalPath(e);try{return{data:Tf(await Ri(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}}async exists(e){var t=this;let n=t._getFinalPath(e);try{return await e0(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(J(r)&&r instanceof Sf){let o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&r.push(o);let i=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(e){var t=this;try{return{data:await Mf(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{let o=T(T(T({},r0),t),{},{prefix:e||""});return{data:await dt(r.fetch,`${r.url}/object/list/${r.bucketId}`,o,{headers:r.headers},n),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(J(o))return{data:null,error:o};throw o}}async listV2(e,t){var n=this;try{let r=T({},e);return{data:await dt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},Ly="2.89.0",Fy={"X-Client-Info":`storage-js/${Ly}`},i0=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;let o=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=T(T({},Fy),t),this.fetch=Rf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{let n=t.listBucketOptionsToQueryString(e);return{data:await Ri(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ri(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await dt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Af(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Mf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},s0=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=T(T({},Fy),t),this.fetch=Rf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await dt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),o=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Ri(t.fetch,o,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Mf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!KT(e))throw new yc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new Ny({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(o,i){let s=o[i];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(o,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},Nf={"X-Client-Info":`storage-js/${Ly}`,"Content-Type":"application/json"},jy=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function je(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var If=class extends jy{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},a0=class extends jy{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};var xf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var c0=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ky=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u0=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let r=e.status||500,o=e;if(typeof o.json=="function")o.json().then(i=>{let s=i?.statusCode||i?.code||r+"";t(new If(ky(i),r,s))}).catch(()=>{let i=r+"";t(new If(o.statusText||`HTTP ${r} error`,r,i))});else{let i=r+"";t(new If(o.statusText||`HTTP ${r} error`,r,i))}}else t(new a0(ky(e),e))},l0=(e,t,n,r)=>{let o={method:e,headers:t?.headers||{}};return e==="GET"||!r?o:(c0(r)?(o.headers=T({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,T(T({},o),n))};async function d0(e,t,n,r,o,i){return new Promise((s,a)=>{e(n,l0(t,r,o,i)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;let u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>u0(c,a,r))})}async function $e(e,t,n,r,o){return d0(e,"POST",t,r,o,n)}var f0=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=T(T({},Nf),t),this.fetch=xf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await $e(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(je(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await $e(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(je(r))return{data:null,error:r};throw r}}},h0=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=T(T({},Nf),t),this.fetch=xf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await $e(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await $e(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await $e(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}},p0=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=T(T({},Nf),t),this.fetch=xf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await $e(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await $e(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}}},g0=class extends p0{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new m0(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},m0=class extends f0{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new v0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},v0=class extends h0{constructor(e,t,n,r,o){super(e,t,o),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},$y=class extends i0{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new o0(this.url,this.headers,e,this.fetch)}get vectors(){return new g0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new s0(this.url+"/iceberg",this.headers,this.fetch)}};var wc="2.89.0";var Gn=30*1e3,Ec=3,Dc=Ec*Gn,Uy="http://localhost:9999",By="supabase.auth.token";var Vy={"X-Client-Info":`gotrue-js/${wc}`};var Ni="X-Supabase-Api-Version",Of={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zy=600*1e3;var sn=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function _(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var _c=class extends sn{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function qy(e){return _(e)&&e.name==="AuthApiError"}var We=class extends sn{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},ft=class extends sn{constructor(t,n,r,o){super(t,r,o),this.name=n,this.status=r}},we=class extends ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Gy(e){return _(e)&&e.name==="AuthSessionMissingError"}var Ut=class extends ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Wn=class extends ft{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Kn=class extends ft{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Wy(e){return _(e)&&e.name==="AuthImplicitGrantRedirectError"}var xi=class extends ft{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},bc=class extends ft{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var to=class extends ft{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Cc(e){return _(e)&&e.name==="AuthRetryableFetchError"}var Oi=class extends ft{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var Zn=class extends ft{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ky=` 	
\r=`.split(""),y0=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ky.length;t+=1)e[Ky[t].charCodeAt(0)]=-2;for(let t=0;t<Ic.length;t+=1)e[Ic[t].charCodeAt(0)]=t;return e})();function Zy(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(Ic[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(Ic[r]),t.queuedBits-=6}}function Yy(e,t,n){let r=y0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kf(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{D0(s,r,n)};for(let s=0;s<e.length;s+=1)Yy(e.charCodeAt(s),o,i);return t.join("")}function w0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function E0(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let o=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}w0(r,t)}}function D0(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function an(e){let t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)Yy(e.charCodeAt(o),n,r);return new Uint8Array(t)}function Qy(e){let t=[];return E0(e,n=>t.push(n)),new Uint8Array(t)}function Bt(e){let t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};return e.forEach(o=>Zy(o,n,r)),Zy(null,n,r),t.join("")}function Jy(e){return Math.round(Date.now()/1e3)+e}function Xy(){return Symbol("auth-callback")}var ue=()=>typeof window<"u"&&typeof document<"u",Yn={tested:!1,writable:!1},Sc=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yn.tested)return Yn.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yn.tested=!0,Yn.writable=!0}catch{Yn.tested=!0,Yn.writable=!1}return Yn.writable};function ew(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return n.searchParams.forEach((r,o)=>{t[o]=r}),t}var Tc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),tw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Qn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},cn=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},he=async(e,t)=>{await e.removeItem(t)},ki=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};ki.promiseConstructor=Promise;function Ac(e){let t=e.split(".");if(t.length!==3)throw new Zn("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Hy.test(t[r]))throw new Zn("JWT not in base64url format");return{header:JSON.parse(kf(t[0])),payload:JSON.parse(kf(t[1])),signature:an(t[2]),raw:{header:t[0],payload:t[1]}}}async function nw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rw(e,t){return new Promise((r,o)=>{(async()=>{for(let i=0;i<1/0;i++)try{let s=await e(i);if(!t(i,null,s)){r(s);return}}catch(s){if(!t(i,s)){o(s);return}}})()})}function _0(e){return("0"+e.toString(16)).substr(-2)}function b0(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,o="";for(let i=0;i<56;i++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,_0).join("")}async function C0(e){let n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")}async function I0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=await C0(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(e,t,n=!1){let r=b0(),o=r;n&&(o+="/PASSWORD_RECOVERY"),await Qn(e,`${t}-code-verifier`,o);let i=await I0(r);return[i,r===i?"plain":"s256"]}var S0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ow(e){let t=e.headers.get(Ni);if(!t||!t.match(S0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iw(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var T0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xn(e){if(!T0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rc(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aw(e,t){return new Proxy(e,{get:(n,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,o)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,o)}})}function Pf(e){return JSON.parse(JSON.stringify(e))}var er=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),A0=[502,503,504];async function cw(e){var t;if(!tw(e))throw new to(er(e),0);if(A0.includes(e.status))throw new to(er(e),e.status);let n;try{n=await e.json()}catch(i){throw new We(er(i),i)}let r,o=ow(e);if(o&&o.getTime()>=Of["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Oi(er(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new we}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new Oi(er(n),e.status,n.weak_password.reasons);throw new _c(er(n),e.status||500,r)}var R0=(e,t,n,r)=>{let o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function C(e,t,n,r){var o;let i=Object.assign({},r?.headers);i[Ni]||(i[Ni]=Of["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let s=(o=r?.query)!==null&&o!==void 0?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await M0(e,t,n+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function M0(e,t,n,r,o,i){let s=R0(t,r,o,i),a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new to(er(c),0)}if(a.ok||await cw(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await cw(c)}}function Ke(e){var t;let n=null;N0(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Jy(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Lf(e){let t=Ke(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function It(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function uw(e){return{data:e,error:null}}function lw(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=e,s=hn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function Ff(e){return e}function N0(e){return e.access_token&&e.refresh_token&&e.expires_in}var Mc=["global","local","others"];var no=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Tc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Mc[0]){if(Mc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mc.join(", ")}`);try{return await C(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await C(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:It})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:n}=t,r=hn(t,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r?.newEmail,delete o.newEmail),await C(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:lw,redirectTo:n?.redirectTo})}catch(n){if(_(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await C(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:It})}catch(n){if(_(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,o,i,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=await C(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:Ff});if(l.error)throw l.error;let d=await l.json(),h=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(_(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Xn(t);try{return await C(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:It})}catch(n){if(_(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Xn(t);try{return await C(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:It})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Xn(t);try{return await C(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:It})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Xn(t.userId);try{let{data:n,error:r}=await C(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(_(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Xn(t.userId),Xn(t.id);try{return{data:await C(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(_(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,o,i,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=await C(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:Ff});if(l.error)throw l.error;let d=await l.json(),h=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(_(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await C(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await C(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await C(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await C(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await C(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_(n))return{data:null,error:n};throw n}}};function jf(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var tr={debug:!!(globalThis&&Sc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Pi=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Nc=class extends Pi{};async function $f(e,t,n){tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),tr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Nc(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(tr.debug)try{let i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function dw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Uf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function fw(e){return parseInt(e,16)}function hw(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function pw(e){var t;let{chainId:n,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:c,resources:u,scheme:l,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=Uf(e.address),p=l?`${l}://${r}`:r,g=e.statement?`${e.statement}
`:"",v=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`,m=`URI: ${d}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(o&&(m+=`
Expiration Time: ${o.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),c&&(m+=`
Request ID: ${c}`),u){let L=`
Resources:`;for(let E of u){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);L+=`
- ${E}`}m+=L}return`${v}
${m}`}var X=class extends Error{constructor({message:t,code:n,cause:r,name:o}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=o??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}},nr=class extends X{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function gw({error:e,options:t}){var n,r,o;let{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new X({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new X({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new X({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=i.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new X({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new X({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new X({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new X({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new X({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(Bf(s)){if(i.rp.id!==s)return new X({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new X({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new X({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new X({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new X({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function mw({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new X({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new X({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(Bf(r)){if(n.rpId!==r)return new X({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new X({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new X({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new X({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var Vf=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},x0=new Vf;function yw(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,o=hn(e,["challenge","user","excludeCredentials"]),i=an(t).buffer,s=Object.assign(Object.assign({},n),{id:an(n.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:an(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function ww(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=hn(e,["challenge","allowCredentials"]),o=an(t).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:an(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Ew(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Bt(new Uint8Array(e.response.attestationObject)),clientDataJSON:Bt(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Dw(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Bt(new Uint8Array(o.authenticatorData)),clientDataJSON:Bt(new Uint8Array(o.clientDataJSON)),signature:Bt(new Uint8Array(o.signature)),userHandle:o.userHandle?Bt(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function vw(){var e,t;return!!(ue()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function O0(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nr("Browser returned unexpected credential type",t)}:{data:null,error:new nr("Empty credential response",t)}}catch(t){return{data:null,error:gw({error:t,options:e})}}}async function k0(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nr("Browser returned unexpected credential type",t)}:{data:null,error:new nr("Empty credential response",t)}}catch(t){return{data:null,error:mw({error:t,options:e})}}}var P0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},L0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function xc(...e){let t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(let o of e)if(o)for(let i in o){let s=o[i];if(s!==void 0)if(Array.isArray(s))r[i]=s;else if(n(s))r[i]=s;else if(t(s)){let a=r[i];t(a)?r[i]=xc(a,s):r[i]=xc(s)}else r[i]=s}return r}function F0(e,t){return xc(P0,e,t||{})}function j0(e,t){return xc(L0,e,t||{})}var Oc=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:o},i){try{let{data:s,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:a};let c=o??x0.createNewAbortSignal();if(s.webauthn.type==="create"){let{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{let u=F0(s.webauthn.credential_options.publicKey,i?.create),{data:l,error:d}=await O0({publicKey:u,signal:c});return l?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}case"request":{let u=j0(s.webauthn.credential_options.publicKey,i?.request),{data:l,error:d}=await k0(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return l?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}}}catch(s){return _(s)?{data:null,error:s}:{data:null,error:new We("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},i){if(!n)return{data:null,error:new sn("rpId is required for WebAuthn authentication")};try{if(!vw())return{data:null,error:new We("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:i});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return _(s)?{data:null,error:s}:{data:null,error:new We("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},i){if(!n)return{data:null,error:new sn("rpId is required for WebAuthn registration")};try{if(!vw())return{data:null,error:new We("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(l=>{var d;return(d=l.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(l=>l?this.client.mfa.unenroll({factorId:l?.id}):void 0),{data:null,error:a};let{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return _(s)?{data:null,error:s}:{data:null,error:new We("Unexpected error in register",s)}}}};dw();var $0={url:Uy,storageKey:By,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _w(e,t,n){return await n()}var ro={},U0=(()=>{class e{get jwks(){var n,r;return(r=(n=ro[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=ro[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},$0),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ue()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new no({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Tc(s.fetch),this.lock=s.lock||_w,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&ue()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=$f:this.lock=_w,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Oc(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Sc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=jf(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wc}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},o="none";if(ue()&&(r=ew(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),ue()&&this.detectSessionInUrl&&o!=="none"){let{data:i,error:s}=await this._getSessionFromURL(r,o);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Wy(s)){let u=(n=s.details)===null||n===void 0?void 0:n.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}let{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return _(r)?this._returnResult({error:r}):this._returnResult({error:new We("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,i;try{let s=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(i=n?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ke}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(_(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(n){var r,o,i;try{let s;if("email"in n){let{email:d,password:h,options:f}=n,p=null,g=null;this.flowType==="pkce"&&([p,g]=await Jn(this.storage,this.storageKey)),s=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},xform:Ke})}else if("phone"in n){let{phone:d,password:h,options:f}=n;s=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(o=f?.data)!==null&&o!==void 0?o:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ke})}else throw new Wn("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return await he(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(n){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=await C(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Lf})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=await C(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Lf})}else throw new Wn("You must provide either an email or phone number and a password");let{data:o,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!o||!o.session||!o.user){let s=new Ut;return this._returnResult({data:{user:null,session:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:i})}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,o,i,s;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(i=n.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,i,s,a,c,u,l,d,h,f;let p,g;if("message"in n)p=n.message,g=n.signature;else{let{chain:v,wallet:m,statement:L,options:E}=n,D;if(ue())if(typeof m=="object")D=m;else{let St=window;if("ethereum"in St&&typeof St.ethereum=="object"&&"request"in St.ethereum&&typeof St.ethereum.request=="function")D=St.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=m}let B=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href),ht=await D.request({method:"eth_requestAccounts"}).then(St=>St).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ht||ht.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let G=Uf(ht[0]),Z=(o=E?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Z){let St=await D.request({method:"eth_chainId"});Z=fw(St)}let Sw={domain:B.host,address:G,statement:L,uri:B.href,version:"1",chainId:Z,nonce:(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=E?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=E?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=E?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=pw(Sw),g=await D.request({method:"personal_sign",params:[hw(p),G]})}try{let{data:v,error:m}=await C(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ke});if(m)throw m;if(!v||!v.session||!v.user){let L=new Ut;return this._returnResult({data:{user:null,session:null},error:L})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:m})}catch(v){if(_(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(n){var r,o,i,s,a,c,u,l,d,h,f,p;let g,v;if("message"in n)g=n.message,v=n.signature;else{let{chain:m,wallet:L,statement:E,options:D}=n,B;if(ue())if(typeof L=="object")B=L;else{let G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))B=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=L}let ht=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in B&&B.signIn){let G=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:ht.host,uri:ht.href}),E?{statement:E}:null)),Z;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")Z=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)Z=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)g=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),v=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${ht.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${ht.href}`,`Issued At: ${(i=(o=D?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=D?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((a=D?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((c=D?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((u=D?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((l=D?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((h=(d=D?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...D.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);let G=await B.signMessage(new TextEncoder().encode(g),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=G}}try{let{data:m,error:L}=await C(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Bt(v)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=n.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ke});if(L)throw L;if(!m||!m.session||!m.user){let E=new Ut;return this._returnResult({data:{user:null,session:null},error:E})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:L})}catch(m){if(_(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(n){let r=await cn(this.storage,`${this.storageKey}-code-verifier`),[o,i]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new bc;let{data:s,error:a}=await C(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Ke});if(await he(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Ut;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(n){try{let{options:r,provider:o,token:i,access_token:s,nonce:a}=n,c=await C(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ke}),{data:u,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){let d=new Ut;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,o,i,s,a;try{if("email"in n){let{email:c,options:u}=n,l=null,d=null;this.flowType==="pkce"&&([l,d]=await Jn(this.storage,this.storageKey));let{error:h}=await C(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in n){let{phone:c,options:u}=n,{data:l,error:d}=await C(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(s=u?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:d})}throw new Wn("You must provide either an email or phone number.")}catch(c){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,o;try{let i,s;"options"in n&&(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(o=n.options)===null||o===void 0?void 0:o.captchaToken);let{data:a,error:c}=await C(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ke});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let u=a.session,l=a.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(_(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(n){var r,o,i,s,a;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Jn(this.storage,this.storageKey));let l=await C(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((i=n?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:uw});return!((s=l.data)===null||s===void 0)&&s.url&&ue()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new we;let{error:i}=await C(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(n){if(_(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:o,type:i,options:s}=n,{error:a}=await C(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:o,type:i,options:s}=n,{data:a,error:c}=await C(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Wn("You must provide either an email or phone number and a type")}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){let i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let o=n.expires_at?n.expires_at*1e3-Date.now()<Dc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){let a=await cn(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=Rc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=aw(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:i,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await C(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:It}):await this._useSession(async r=>{var o,i,s;let{data:a,error:c}=r;if(c)throw c;return!(!((o=a.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new we}:await C(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:It})})}catch(r){if(_(r))return Gy(r)&&(await this._removeSession(),await he(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{let{data:i,error:s}=o;if(s)throw s;if(!i.session)throw new we;let a=i.session,c=null,u=null;this.flowType==="pkce"&&n.email!=null&&([c,u]=await Jn(this.storage,this.storageKey));let{data:l,error:d}=await C(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:u}),jwt:a.access_token,xform:It});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(o){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new we;let r=Date.now()/1e3,o=r,i=!0,s=null,{payload:a}=Ac(n.access_token);if(a.exp&&(o=a.exp,i=o<=r),i){let{data:c,error:u}=await this._callRefreshToken(n.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:u}=await this._getUser(n.access_token);if(u)throw u;s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(_(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(o=a.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new we;let{data:i,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!ue())throw new Kn("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Kn(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new xi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new xi("No code detected.");let{data:E,error:D}=await this._exchangeCodeForSession(n.code);if(D)throw D;let B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:E.session,redirectType:null},error:null}}let{provider_token:o,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:c,expires_at:u,token_type:l}=n;if(!s||!c||!a||!l)throw new Kn("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;u&&(f=parseInt(u));let p=f-d;p*1e3<=Gn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);let{data:v,error:m}=await this._getUser(s);if(m)throw m;let L={provider_token:o,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:l,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:n.type},error:null})}catch(o){if(_(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await cn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;let{data:i,error:s}=r;if(s)return this._returnResult({error:s});let a=(o=i.session)===null||o===void 0?void 0:o.access_token;if(a){let{error:c}=await this.admin.signOut(a,n);if(c&&!(qy(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await he(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=Xy(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,i;try{let{data:{session:s},error:a}=r;if(a)throw a;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}})}async resetPasswordForEmail(n,r={}){let o=null,i=null;this.flowType==="pkce"&&([o,i]=await Jn(this.storage,this.storageKey,!0));try{return await C(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var n;try{let{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:o,error:i}=await this._useSession(async s=>{var a,c,u,l,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await C(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ue()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:n.provider,url:o?.url},error:null})}catch(o){if(_(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{let{error:i,data:{session:s}}=r;if(i)throw i;let{options:a,provider:c,token:u,access_token:l,nonce:d}=n,h=await C(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=s?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:c,id_token:u,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ke}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ut}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(await he(this.storage,`${this.storageKey}-code-verifier`),_(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,i;let{data:s,error:a}=r;if(a)throw a;return await C(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(i=(o=s.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let o=Date.now();return await rw(async i=>(i>0&&await nw(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await C(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ke})),(i,s)=>{let a=200*Math.pow(2,i);return s&&Cc(s)&&Date.now()+a-o<Gn})}catch(o){if(this._debug(r,"error",o),_(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),ue()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;let o="#_recoverAndRefresh()";this._debug(o,"begin");try{let i=await cn(this.storage,this.storageKey);if(i&&this.userStorage){let a=await cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Qn(this.userStorage,this.storageKey+"-user",a)),i.user=(n=a?.user)!==null&&n!==void 0?n:Rc()}else if(i&&!i.user&&!i.user){let a=await cn(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await he(this.storage,this.storageKey+"-user"),await Qn(this.storage,this.storageKey,i)):i.user=Rc()}if(this._debug(o,"session from storage",i),!this._isValidSession(i)){this._debug(o,"session is not valid"),i!==null&&await this._removeSession();return}let s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Dc;if(this._debug(o,`session has${s?"":" not"} expired with margin of ${Dc}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Cc(a)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(i.access_token);!c&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(o,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(o,"error",i),console.error(i);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new we;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ki;let{data:s,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new we;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),_(s)){let a={data:null,error:s};return Cc(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(n,r,o=!0){let i=`#_notifyAllSubscribers(${n})`;this._debug(i,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await he(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Qn(this.userStorage,this.storageKey+"-user",{user:r.user});let i=Object.assign({},r);delete i.user;let s=Pf(i);await Qn(this.storage,this.storageKey,s)}else{let i=Pf(r);await Qn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await he(this.storage,this.storageKey),await he(this.storage,this.storageKey+"-code-verifier"),await he(this.storage,this.storageKey+"-user"),this.userStorage&&await he(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ue()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),Gn);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((o.expires_at*1e3-n)/Gn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Gn}ms, refresh threshold is ${Ec} ticks`),i<=Ec&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Pi)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){let i=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&i.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){let[s,a]=await Jn(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(o?.queryParams){let s=new URLSearchParams(o.queryParams);i.push(s.toString())}return o?.skipBrowserRedirect&&i.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${i.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;let{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await C(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,i;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:u,error:l}=await C(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token});return l?this._returnResult({data:null,error:l}):(n.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;let{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Ew(n.webauthn.credential_response):Dw(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:u}=await C(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;let{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await C(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:yw(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:ww(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};let i={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;let{data:{session:o},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=Ac(o.access_token),a=null;s.aal&&(a=s.aal);let c=a;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let l=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:o},error:i}=r;return i?this._returnResult({data:null,error:i}):o?await C(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new we})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async o=>{let{data:{session:i},error:s}=o;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new we});let a=await C(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&ue()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(o){if(_(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(n,r){try{return await this._useSession(async o=>{let{data:{session:i},error:s}=o;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new we});let a=await C(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&ue()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(o){if(_(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?await C(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new we})})}catch(n){if(_(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:o},error:i}=r;return i?this._returnResult({data:null,error:i}):o?(await C(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new we})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(c=>c.kid===n);if(o)return o;let i=Date.now();if(o=this.jwks.keys.find(c=>c.kid===n),o&&this.jwks_cached_at+zy>i)return o;let{data:s,error:a}=await C(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,o=s.keys.find(c=>c.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){let{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});o=p.session.access_token}let{header:i,payload:s,signature:a,raw:{header:c,payload:u}}=Ac(o);r?.allowExpired||iw(s.exp);let l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){let{error:p}=await this.getUser(o);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}let d=sw(i.alg),h=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Qy(`${c}.${u}`)))throw new Zn("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(o){if(_(o))return this._returnResult({data:null,error:o});throw o}}}return e.nextInstanceID={},e})(),Hf=U0;var B0=Hf,zf=B0;var V0="2.89.0",Li="";typeof Deno<"u"?Li="deno":typeof document<"u"?Li="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Li="react-native":Li="node";var H0={"X-Client-Info":`supabase-js-${Li}/${V0}`},z0={headers:H0},q0={schema:"public"},G0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W0={};function Fi(e){"@babel/helpers - typeof";return Fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fi(e)}function K0(e,t){if(Fi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z0(e){var t=K0(e,"string");return Fi(t)=="symbol"?t:t+""}function Y0(e,t,n){return(t=Z0(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(n),!0).forEach(function(r){Y0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Q0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),J0=()=>Headers,X0=(e,t,n)=>{let r=Q0(n),o=J0();return async(i,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:e,u=new o(s?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,te(te({},s),{},{headers:u}))}};function eA(e){return e.endsWith("/")?e:e+"/"}function tA(e,t){var n,r;let{db:o,auth:i,realtime:s,global:a}=e,{db:c,auth:u,realtime:l,global:d}=t,h={db:te(te({},c),o),auth:te(te({},u),i),realtime:te(te({},l),s),storage:{},global:te(te(te({},d),a),{},{headers:te(te({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function nA(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eA(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var rA=class extends zf{constructor(e){super(e)}},oA=class{constructor(e,t,n){var r,o;this.supabaseUrl=e,this.supabaseKey=t;let i=nA(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);let s=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:q0,realtime:W0,auth:te(te({},G0),{},{storageKey:s}),global:z0},c=tA(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(l,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=X0(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(te({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(l=>this.realtime.setAuth(l)).catch(l=>console.warn("Failed to set initial Realtime auth token:",l)),this.rest=new by(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new $y(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Di(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();let{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:o,storageKey:i,flowType:s,lock:a,debug:c,throwOnError:u},l,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rA({url:this.authUrl.href,headers:te(te({},h),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:o,flowType:s,lock:a,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Si(this.realtimeUrl.href,te(te({},e),{},{params:te(te({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},Cw=(e,t,n)=>new oA(e,t,n);function iA(){if(typeof window<"u"||typeof process>"u")return!1;let e=process.version;if(e==null)return!1;let t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}iA()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Iw=class e{supabase;_session=ze(null);_user=ze(null);_loading=ze(!0);session=this._session.asReadonly();user=this._user.asReadonly();loading=this._loading.asReadonly();isAuthenticated=kd(()=>!!this._session());constructor(){this.supabase=Cw(gf.supabaseUrl,gf.supabaseAnonKey,{auth:{persistSession:!0,autoRefreshToken:!0}}),this.initSession()}async initSession(){try{let{data:{session:t}}=await this.supabase.auth.getSession();this._session.set(t),this._user.set(t?.user??null),this.supabase.auth.onAuthStateChange((n,r)=>{this._session.set(r),this._user.set(r?.user??null)})}catch(t){console.error("Error initializing session:",t)}finally{this._loading.set(!1)}}get client(){return this.supabase}getAccessToken(){return this._session()?.access_token??null}static \u0275fac=function(n){return new(n||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};export{w as a,Y as b,j as c,le as d,ie as e,Q as f,sE as g,aE as h,Qe as i,Tt as j,pt as k,b as l,En as m,_s as n,A as o,Dn as p,R as q,O as r,y as s,Gt as t,tp as u,np as v,gp as w,mp as x,Je as y,be as z,Oe as A,VE as B,ze as C,ot as D,Pn as E,$o as F,kt as G,Mg as H,KD as I,qo as J,Ae as K,yd as L,xr as M,jn as N,bm as O,Wo as P,Sm as Q,Or as R,Ia as S,Xb as T,eC as U,tC as V,nC as W,rC as X,Rm as Y,Id as Z,Sd as _,Sa as $,Td as aa,Ad as ba,Mm as ca,cC as da,xm as ea,Ta as fa,km as ga,lC as ha,jm as ia,$m as ja,DC as ka,xC as la,qm as ma,Nd as na,Gm as oa,Km as pa,LC as qa,Zm as ra,UC as sa,BC as ta,VC as ua,kd as va,MU as wa,iv as xa,NU as ya,xU as za,Qo as Aa,xa as Ba,Lt as Ca,Pr as Da,hv as Ea,xI as Fa,jt as Ga,uf as Ha,Wr as Ia,fc as Ja,yT as Ka,DT as La,gf as Ma,Iw as Na};
